import{c as d,a,d as i,w as p,r as f,i as x,b as h,F as b,t as w,H as g,j as y,o as u}from"./app-Du355Hwa.js";import{L as P}from"./Logo-CEFCQWTC.js";import{I as V}from"./Input-Ce6sOWCE.js";import{S as E}from"./Switch-C9_nwvxw.js";import{B as _}from"./Button-QuQuG-sh.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{c as F}from"./createLucideIcon-CQR3ABw7.js";import"./Tooltip-Bh561etO.js";import"./mail-CmabDzCr.js";/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=F("move-left",[["path",{d:"M6 8L2 12L6 16",key:"kyvwex"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),N={name:"UpdateAccount",components:{Input:V,Switch:E,Button:_,Logo:P},inject:["formState","notificationState"],data(){return{form:{name:"",email:"",password:"",confirmPassword:""},changePassword:!1,MoveLeft:k,loading:!1}},methods:{goBack(){this.$router.push({name:"show-account"})},async submit(){var m,e;if(!this.loading&&(this.formState.hideFormErrors(),this.form.name.trim()===""&&this.formState.setFormError("name","Name is required"),this.changePassword&&(this.form.password.trim()===""?this.formState.setFormError("password","New Password is required"):this.form.confirmPassword.trim()===""?this.formState.setFormError("confirmPassword","Confirm New Password is required"):this.form.password!==this.form.confirmPassword&&this.formState.setFormError("confirmPassword","Passwords do not match")),!this.formState.hasErrors)){this.loading=!0;try{const t={name:this.form.name,password:this.changePassword&&this.form.password||void 0};await y.post("/api/auth/update",t),await g().fetchUser(),this.notificationState.showSuccessNotification("Account updated successfully."),this.$router.push({name:"show-account"})}catch(t){const l=((e=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:e.message)||(t==null?void 0:t.message)||"Something went wrong while updating your account";this.formState.setServerFormErrors(t),this.notificationState.showWarningNotification(l),console.error("Failed to update account:",t)}finally{this.loading=!1}}}},mounted(){const m=g();m.user&&(this.form.name=m.user.name,this.form.email=m.user.email)}},T={class:"min-h-screen bg-gray-50 p-6"},U={class:"max-w-2xl mx-auto"},B={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},I={class:"flex items-center justify-between mb-6"},L={class:"space-y-4 mb-8"},A={key:0,class:"text-red-500 text-sm mb-3"},C={class:"ml-1"};function M(m,e,t,l,o,s){const c=f("Button"),n=f("Input"),S=f("Switch");return u(),d("div",T,[a("div",U,[a("div",B,[a("div",I,[e[7]||(e[7]=a("h1",{class:"text-2xl font-semibold leading-none tracking-tight"},"Update Account",-1)),i(c,{type:"light",size:"md",leftIcon:o.MoveLeft,action:s.goBack},{default:p(()=>e[6]||(e[6]=[a("span",{class:"ml-2"},"Back to Account",-1)])),_:1},8,["leftIcon","action"])]),a("form",{onSubmit:e[5]||(e[5]=x((...r)=>s.submit&&s.submit(...r),["prevent"]))},[i(n,{type:"text",label:"Name",class:"mb-4",modelValue:o.form.name,"onUpdate:modelValue":e[0]||(e[0]=r=>o.form.name=r),errorText:s.formState.getFormError("name")},null,8,["modelValue","errorText"]),i(n,{type:"email",class:"mb-8",label:"Email",modelValue:o.form.email,"onUpdate:modelValue":e[1]||(e[1]=r=>o.form.email=r),errorText:s.formState.getFormError("email"),disabled:""},null,8,["modelValue","errorText"]),a("div",L,[i(S,{size:"sm",modelValue:o.changePassword,"onUpdate:modelValue":e[2]||(e[2]=r=>o.changePassword=r),suffixText:"Change Password"},null,8,["modelValue"]),o.changePassword?(u(),d(b,{key:0},[i(n,{type:"password",label:"New Password",modelValue:o.form.password,"onUpdate:modelValue":e[3]||(e[3]=r=>o.form.password=r),errorText:s.formState.getFormError("password")},null,8,["modelValue","errorText"]),i(n,{type:"password",label:"Confirm New Password",modelValue:o.form.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=r=>o.form.confirmPassword=r),errorText:s.formState.getFormError("confirmPassword")},null,8,["modelValue","errorText"])],64)):h("",!0)]),s.formState.generalErrorText?(u(),d("div",A,w(s.formState.generalErrorText),1)):h("",!0),i(c,{size:"md",type:"primary",class:"w-full",action:s.submit,disabled:o.loading},{default:p(()=>[a("span",C,w(o.loading?"Updating...":"Update Account"),1)]),_:1},8,["action","disabled"])],32)])])])}const O=v(N,[["render",M]]);export{O as default};
