import{S as $,M as S,T as ee,P as te,i as L,a as R}from"./Table-C-dAgqL-.js";import{I as K,P as oe}from"./Input-DLLHQFCa.js";import{B as se}from"./Button-D-J7vJoA.js";import{f as ne,a as ae,D as re}from"./dateUtils-BHWJh6Nr.js";import{i as _,m as x,w,r as u,o as l,a as n,d,j as ie,c as m,b as g,e as b,t as f,F as v,l as q,n as P}from"./app-Bh0CRPT1.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as le}from"./circle-alert-BnPEXNJk.js";import{c as D}from"./createLucideIcon-C9p8Jo51.js";import{P as j}from"./phone-call-DQJpjRvN.js";import{P as de}from"./play-j9duPwY9.js";import{P as ce}from"./phone-BBUjWaYC.js";import"./Tooltip-CP6j0BUe.js";import"./Drawer-Bx9DDrOI.js";import"./arrow-up-Q9vzLiuS.js";import"./Switch-kMwrpPJn.js";import"./vue-draggable-next.esm-bundler-C0JoXrCN.js";import"./mail-D1Pe_K0u.js";/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=D("download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=D("ear",[["path",{d:"M6 8.5a6.5 6.5 0 1 1 13 0c0 6-6 6-6 10a3.5 3.5 0 1 1-7 0",key:"1dfaln"}],["path",{d:"M15 8.5a2.5 2.5 0 0 0-5 0v1a2 2 0 1 1 0 4",key:"1qnva7"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=D("phone-incoming",[["polyline",{points:"16 2 16 8 22 8",key:"1ygljm"}],["line",{x1:"22",x2:"16",y1:"2",y2:"8",key:"1xzwqn"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=D("phone-outgoing",[["polyline",{points:"22 8 22 2 16 2",key:"1g204g"}],["line",{x1:"16",x2:"22",y1:"8",y2:"2",key:"1ggias"}],["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),ue={components:{Modal:S,Input:K,Select:$},inject:["formState","notificationState"],data(){return{isCreating:!1,form:{from:"",to:"",direction:"",status:"",organization_id:null,department_id:null,agent_id:null},directionOptions:[{label:"Inbound",value:"inbound"},{label:"Outbound",value:"outbound"}],statusOptions:[{label:"Initiated",value:"initiated"},{label:"In Progress",value:"in-progress"},{label:"Completed",value:"completed"},{label:"Failed",value:"failed"}],organizationOptions:[],departmentOptions:[],agentOptions:[]}},methods:{showModal(){this.reset(),this.fetchOrganizations(),this.fetchDepartments(),this.fetchAgents(),this.$refs.modal.showModal()},reset(){this.form.from="",this.form.to="",this.form.direction="",this.form.status="",this.form.organization_id=null,this.form.department_id=null,this.form.agent_id=null},async fetchOrganizations(){var o;try{const e=await _.get("/api/organizations");this.organizationOptions=(((o=e.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(e){console.error("Failed to load organizations:",e)}},async fetchDepartments(){var o;try{const e=await _.get("/api/departments");this.departmentOptions=(((o=e.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(e){console.error("Failed to load departments:",e)}},async fetchAgents(){var o;try{const e=await _.get("/api/users");this.agentOptions=(((o=e.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(e){console.error("Failed to load agents:",e)}},async createCall(o){var e,r;if(this.formState.hideFormErrors(),this.form.from.trim()===""&&this.formState.setFormError("from","From number is required"),this.form.to.trim()===""&&this.formState.setFormError("to","To number is required"),this.form.direction||this.formState.setFormError("direction","Direction is required"),this.form.organization_id||this.formState.setFormError("organization_id","Organization is required"),!this.formState.hasErrors){this.isCreating=!0;try{const i={...this.form};await _.post("/api/calls",i,{params:{organization_id:this.form.organization_id}}),this.notificationState.showSuccessNotification("Call created"),this.$emit("created"),o()}catch(i){const t=((r=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:r.message)||(i==null?void 0:i.message)||"Something went wrong trying to create the call";this.notificationState.showWarningNotification(t),this.formState.setServerFormErrors(i),console.error("Failed to create call:",i)}finally{this.isCreating=!1}}}}},he={class:"space-y-4"};function ge(o,e,r,i,t,s){const y=u("Input"),h=u("Select"),T=u("Modal");return l(),x(T,{size:"sm",ref:"modal",showFooter:!0,dismissable:!0,scrollOnContent:!1,showApproveButton:!0,header:"Create New Call",approveText:"Create Call",approveAction:s.createCall,approveLoading:t.isCreating,subheader:"Add a new call to the platform"},{trigger:w(p=>[ie(o.$slots,"default",{showModal:p.showModal})]),content:w(()=>[n("div",he,[d(y,{type:"mobile",modelValue:t.form.from,"onUpdate:modelValue":e[0]||(e[0]=p=>t.form.from=p),showAsterisk:!0,label:"From Number",placeholder:"+1234567890",errorText:s.formState.getFormError("from")},null,8,["modelValue","errorText"]),d(y,{type:"mobile",modelValue:t.form.to,"onUpdate:modelValue":e[1]||(e[1]=p=>t.form.to=p),showAsterisk:!0,label:"To Number",placeholder:"+1234567890",errorText:s.formState.getFormError("to")},null,8,["modelValue","errorText"]),d(h,{modelValue:t.form.direction,"onUpdate:modelValue":e[2]||(e[2]=p=>t.form.direction=p),options:t.directionOptions,showAsterisk:!0,label:"Direction",placeholder:"Select direction",errorText:s.formState.getFormError("direction")},null,8,["modelValue","options","errorText"]),d(h,{modelValue:t.form.status,"onUpdate:modelValue":e[3]||(e[3]=p=>t.form.status=p),options:t.statusOptions,label:"Status",placeholder:"Select status",errorText:s.formState.getFormError("status")},null,8,["modelValue","options","errorText"]),d(h,{modelValue:t.form.organization_id,"onUpdate:modelValue":e[4]||(e[4]=p=>t.form.organization_id=p),options:t.organizationOptions,showAsterisk:!0,label:"Organization",placeholder:"Select organization",errorText:s.formState.getFormError("organization_id")},null,8,["modelValue","options","errorText"]),d(h,{modelValue:t.form.department_id,"onUpdate:modelValue":e[5]||(e[5]=p=>t.form.department_id=p),options:t.departmentOptions,label:"Department",placeholder:"Select department",errorText:s.formState.getFormError("department_id")},null,8,["modelValue","options","errorText"]),d(h,{modelValue:t.form.agent_id,"onUpdate:modelValue":e[6]||(e[6]=p=>t.form.agent_id=p),options:t.agentOptions,label:"Agent",placeholder:"Select agent",errorText:s.formState.getFormError("agent_id")},null,8,["modelValue","options","errorText"])])]),_:3},8,["approveAction","approveLoading"])}const fe=k(ue,[["render",ge]]),ye={components:{Modal:S},inject:["notificationState"],data(){return{call:null,isDeleting:!1}},methods:{showModal(o){this.call=o,this.$refs.modal.showModal()},async onDelete(o){var e,r,i;if(this.call){this.isDeleting=!0;try{const t=this.call._links.delete,s=await _.delete(t);(e=s==null?void 0:s.data)!=null&&e.message&&this.notificationState.showSuccessNotification(s.data.message),this.$emit("deleted",this.call.id),o()}catch(t){const s=((i=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Something went wrong while deleting the call";this.notificationState.showWarningNotification(s)}finally{this.isDeleting=!1}}}}},we={key:0,class:"text-sm text-gray-700 dark:text-neutral-400"},xe={class:"font-bold text-black"},_e={class:"font-bold text-black"};function be(o,e,r,i,t,s){const y=u("Modal");return l(),x(y,{size:"sm",ref:"modal",approveType:"danger",header:"Confirm Delete",isLoading:t.isDeleting,approveAction:s.onDelete,approveText:"Delete Call"},{content:w(()=>[t.call?(l(),m("p",we,[e[0]||(e[0]=b(" Are you sure you want to permanently delete the call from ")),n("span",xe,f(t.call.from),1),e[1]||(e[1]=b(" to ")),n("span",_e,f(t.call.to),1),e[2]||(e[2]=b("? "))])):g("",!0)]),_:1},8,["isLoading","approveAction"])}const Ce=k(ye,[["render",be]]),ve={inject:["notificationState"],components:{Modal:S,CircleAlert:le},data(){return{isDeleting:!1,callIds:[]}},computed:{total(){return this.callIds.length},approveText(){return this.total===1?"Delete Call":"Delete Calls"}},methods:{showModal(o=[]){this.callIds=o,this.$refs.modal.showModal()},async onDelete(o){var e,r,i;if(!(this.isDeleting||this.callIds.length===0)){this.isDeleting=!0;try{const t="/api/calls",s={data:{call_ids:this.callIds}},y=await _.delete(t,s),h=(e=y==null?void 0:y.data)==null?void 0:e.message;h&&this.notificationState.showSuccessNotification(h),this.$emit("deleted",this.callIds),o()}catch(t){const s=((i=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:i.message)||(t==null?void 0:t.message)||"Something went wrong while deleting calls";this.notificationState.showWarningNotification(s)}finally{this.isDeleting=!1}}}}},Se={class:"flex space-x-2 items-center p-4 text-xs bg-red-50 text-red-500 border border-red-200 border-dashed rounded-lg mb-8"};function ke(o,e,r,i,t,s){const y=u("CircleAlert"),h=u("Modal");return l(),x(h,{size:"sm",ref:"modal",approveType:"danger",approveIcon:"delete",isLoading:t.isDeleting,approveAction:s.onDelete,approveText:s.approveText,header:"Delete Calls"},{content:w(()=>[n("div",Se,[d(y,{size:"20"}),n("span",null," Are you sure you want to delete "+f(s.total>1?`these ${s.total} calls`:"this 1 call")+"? ",1)])]),_:1},8,["isLoading","approveAction","approveText"])}const De=k(ve,[["render",ke]]),Te={inject:["formState","notificationState"],components:{Pill:te,Modal:S,Input:K,Button:se,Popover:oe,Dropdown:re,Table:ee,AddCallModal:fe,DeleteCallModal:Ce,DeleteCallsModal:De,PhoneCall:j,PhoneIncoming:me,PhoneOutgoing:pe,Ear:Z,Download:B},data(){return{Phone:ce,Trash2:R,PhoneCall:j,Ear:Z,Play:de,Download:B,calls:[{id:1,from:{name:"Karabo Modise",number:"+26771123456"},to:{name:"Naledi Mosweu",number:"+26772234567"},direction:"inbound",status:"Completed",agent:{name:"Thapelo Letsholo"},department:{name:"Customer Support"},transfers_count:1,listenFrequency:"3 times",mood:"ðŸ˜€",created_at:"2025-05-09T08:30:00Z",recordingUrl:"https://example.com/recordings/call1.mp3"},{id:2,from:{name:"Keneilwe Letsatsi",number:"+26773345678"},to:{name:"Richard Molefe",number:"+26774456789"},direction:"outbound",status:"Missed",agent:{name:"Lesego Otsile"},department:{name:"Sales"},transfers_count:0,listenFrequency:"Never",mood:null,created_at:"2025-05-09T09:15:00Z",recordingUrl:null},{id:3,from:{name:"Moses Oduetse",number:"+26775567890"},to:{name:"Gorata Moesi",number:"+26776678901"},direction:"inbound",status:"Completed",agent:{name:"Jacob Odirile"},department:{name:"Technical Support"},transfers_count:2,listenFrequency:"5 times",mood:"ðŸ˜Ÿ",created_at:"2025-05-09T10:00:00Z",recordingUrl:"https://example.com/recordings/call3.mp3"},{id:4,from:{name:"Thandiwe Kgotla",number:"+26777789012"},to:{name:"Palesa Ncube",number:"+26778890123"},direction:"outbound",status:"Completed",agent:{name:"Moses Ofentse"},department:{name:"Customer Support"},transfers_count:0,listenFrequency:"1 time",mood:"ðŸ˜",created_at:"2025-05-09T11:30:00Z",recordingUrl:"https://example.com/recordings/call4.mp3"},{id:5,from:{name:"Bontle Phiri",number:"+26779901234"},to:{name:"Tshepo Dlamini",number:"+26770012345"},direction:"inbound",status:"In Progress",agent:{name:"Kagiso Mooketsi"},department:{name:"Billing"},transfers_count:1,listenFrequency:null,mood:"ðŸ˜¡",created_at:"2025-05-09T12:45:00Z",recordingUrl:null}],perPage:"15",checkedRows:[],pagination:{data:[],meta:{total:5}},searchTerm:null,selectAll:!1,filterExpressions:[],sortingExpressions:[],isLoadingCalls:!1,columns:this.prepareColumns(),dropdownOptions:[{icon:R,label:"Delete",action:this.showDeleteCallsModal}],isSuperAdmin:!0}},watch:{selectAll(o){this.checkedRows=this.calls.reduce((e,r)=>(e[r.id]=o,e),{})}},computed:{hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!==""},totalCheckedRows(){return Object.values(this.checkedRows).filter(Boolean).length},hasFilterExpressions(){return this.filterExpressions.length>0},hasSortingExpressions(){return this.sortingExpressions.length>0},showTable(){var o;return this.isLoadingCalls||((o=(this.pagination??{}).meta)==null?void 0:o.total)>0||this.hasSearchTerm||this.hasFilterExpressions||this.hasSortingExpressions}},methods:{formattedDatetime:ae,formattedRelativeDate:ne,prepareColumns(){const o=["From","To","Direction","Status","Agent","Department","Transfers","Listen Often","Mood","Created Date"],e=["From","To","Direction","Status","Agent","Department","Transfers","Listen Often","Mood","Created Date"];return o.map(r=>({name:r,active:e.includes(r),priority:e.includes(r)}))},showAddCallModal(){this.$refs.addCallModal.showModal()},showDeleteCallModal(o){this.$refs.deleteCallModal.showModal(o)},showDeleteCallsModal(){const o=this.calls.filter(e=>this.checkedRows[e.id]).map(e=>e.id);this.$refs.deleteCallsModal.showModal(o)},onCallDeleted(o){this.calls=this.calls.filter(e=>e.id!==o),this.calls.length===0&&this.fetchCalls()},onCallsDeleted(o=[]){o.forEach(e=>{this.checkedRows[e]!==void 0&&(this.checkedRows[e]=!1)}),this.selectAll=!1,this.calls=this.calls.filter(e=>!o.includes(e.id)),this.calls.length===0&&this.fetchCalls()},paginate(o){this.fetchCalls(o)},search(o){this.searchTerm=o,this.fetchCalls()},updatedColumns(o){this.columns=o},updatedFilters(o){const e=o.map(r=>r.expression);L(this.filterExpressions,e)||(this.filterExpressions=e,this.fetchCalls())},updatedSorting(o){const e=o.map(r=>r.expression);L(this.sortingExpressions,e)||(this.sortingExpressions=e,this.fetchCalls())},updatedPerPage(o){this.perPage=o,this.fetchCalls()},async fetchCalls(o=null){var e,r;try{this.isLoadingCalls=!0,this.pagination.data=this.calls,this.checkedRows=this.calls.reduce((i,t)=>(i[t.id]=!1,i),{})}catch(i){const t=((r=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:r.message)||(i==null?void 0:i.message)||"Something went wrong while fetching calls";this.notificationState.showWarningNotification(t),console.error("Failed to fetch calls:",i)}finally{this.isLoadingCalls=!1}},canPlayRecording(o){return o.status==="Completed"&&!!o.recordingUrl},listenToCall(o){this.canPlayRecording(o)&&(this.notificationState.showInfoNotification(`Playing recording for call ID ${o.id}... (Mock Action)`),console.log(`Playing recording: ${o.recordingUrl}`))},downloadRecording(o){o.recordingUrl&&(this.notificationState.showInfoNotification(`Downloading recording for call ID ${o.id}... (Mock Action)`),console.log(`Downloading recording: ${o.recordingUrl}`))},getStatusPillType(o){switch(o){case"Completed":return"success";case"Missed":return"danger";case"In Progress":return"warning";default:return"light"}}},created(){this.isLoadingCalls=!0,this.searchTerm=this.$route.query.searchTerm,this.$route.query.filterExpressions&&(this.filterExpressions=this.$route.query.filterExpressions.split("|")),this.$route.query.sortingExpressions&&(this.sortingExpressions=this.$route.query.sortingExpressions.split("|")),this.fetchCalls()}},Me={class:"select-none min-h-screen bg-gray-50 pt-8 p-4 sm:p-8 space-y-4 sm:space-y-6"},Pe={class:"flex justify-between"},Ae={class:"flex items-end space-x-2"},ze={class:"flex justify-end"},Ee={class:"bg-white dark:bg-neutral-800 border border-gray-200 dark:border-neutral-700 rounded-xl"},Ie={class:"p-4 sm:p-6"},Fe={class:"border-b border-indigo-200"},Ve={scope:"col",class:"whitespace-nowrap align-top font-semibold px-4 py-2.5"},Oe={class:"whitespace-nowrap align-top px-4 py-4"},Ue={key:0,class:"whitespace-nowrap align-center pr-4 py-4"},Ne={class:"text-sm"},Le={class:"text-gray-500"},Re={key:1,class:"whitespace-nowrap align-center pr-4 py-4"},qe={class:"text-sm"},je={class:"text-gray-500"},Be={key:2,class:"whitespace-nowrap align-center pr-4 py-4"},Ze={key:3,class:"whitespace-nowrap align-center pr-4 py-4"},Ke={key:4,class:"whitespace-nowrap align-center pr-4 py-4"},We={key:5,class:"whitespace-nowrap align-center pr-4 py-4"},Ge={key:6,class:"whitespace-nowrap align-center text-center pr-4 py-4"},He={key:7,class:"whitespace-nowrap align-center text-center pr-4 py-4"},Je={key:8,class:"whitespace-nowrap align-center text-center pr-4 py-4"},Ye={key:9,class:"whitespace-nowrap align-center pr-4 py-4"},Qe={class:"flex space-x-1 items-center"},Xe={class:"align-top pr-4 py-4 flex items-center space-x-1"},$e={key:1,class:"select-none w-full flex justify-center py-16"},et={class:"max-w-sm w-full bg-white shadow-sm rounded-xl p-6 flex flex-col items-center text-center space-y-4 border border-dashed border-gray-200"};function tt(o,e,r,i,t,s){const y=u("PhoneCall"),h=u("Button"),T=u("Dropdown"),p=u("Input"),W=u("PhoneIncoming"),G=u("PhoneOutgoing"),H=u("Pill"),M=u("Popover"),J=u("Table"),Y=u("AddCallModal"),Q=u("DeleteCallModal"),X=u("DeleteCallsModal");return l(),m("div",Me,[s.showTable?(l(),m(v,{key:0},[n("div",Pe,[n("div",Ae,[d(y,{size:"48","stroke-width":"1",class:"text-gray-400"}),e[1]||(e[1]=n("div",null,[n("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Calls"),n("p",{class:"text-sm text-gray-600 dark:text-neutral-400"}," Manage all calls within your organization ")],-1))]),n("div",ze,[d(h,{type:"primary",size:"md",leftIcon:t.Phone,leftIconSize:"20",action:s.showAddCallModal},{default:w(()=>e[2]||(e[2]=[n("span",{class:"ml-2"},"Make Call",-1)])),_:1},8,["leftIcon","action"])])]),n("div",Ee,[n("div",Ie,[e[5]||(e[5]=n("div",{class:"flex justify-between items-center mb-4"},[n("div",null,[n("h3",{class:"text-2xl font-semibold text-gray-900 dark:text-white mb-2"},"All Calls"),n("p",{class:"text-sm text-gray-500 dark:text-neutral-400"}," View and manage calls on the Telcoflo platform ")])],-1)),d(J,{resource:"calls",onSearch:s.search,columns:t.columns,perPage:t.perPage,onPaginate:s.paginate,onRefresh:s.fetchCalls,searchTerm:t.searchTerm,pagination:t.pagination,isLoading:t.isLoadingCalls,onUpdatedColumns:s.updatedColumns,onUpdatedFilters:s.updatedFilters,onUpdatedSorting:s.updatedSorting,onUpdatedPerPage:s.updatedPerPage,filterExpressions:t.filterExpressions,sortingExpressions:t.sortingExpressions},{belowToolbar:w(()=>[n("div",{class:P([{hidden:s.totalCheckedRows===0},"bg-gray-50 border flex items-center mb-2 p-4 rounded-lg shadow space-x-2"])},[e[3]||(e[3]=n("span",{class:"text-sm"},"Actions: ",-1)),d(T,{triggerSize:"sm",options:t.dropdownOptions,triggerText:`Select Action (${s.totalCheckedRows} selected)`},null,8,["options","triggerText"])],2)]),head:w(()=>[n("tr",Fe,[n("th",Ve,[d(p,{type:"checkbox",modelValue:t.selectAll,"onUpdate:modelValue":e[0]||(e[0]=a=>t.selectAll=a)},null,8,["modelValue"])]),(l(!0),m(v,null,q(t.columns,(a,C)=>(l(),m(v,{key:C},[a.active?(l(),m("th",{key:0,scope:"col",class:P(["whitespace-nowrap align-top font-semibold pr-4 py-2.5",{"text-center":["Users","Mood"].includes(a.name)}])},f(a.name),3)):g("",!0)],64))),128)),e[4]||(e[4]=n("th",{scope:"col",class:"whitespace-nowrap align-top font-semibold pr-4 py-2.5"},"Actions",-1))])]),body:w(()=>[(l(!0),m(v,null,q(t.calls,a=>{var C,A,z,E,I,F,V,O,U,N;return l(),m("tr",{key:a.id,class:P([t.checkedRows[a.id]?"bg-blue-50":"bg-white hover:bg-gray-50","group cursor-pointer text-sm border-b border-gray-200"])},[n("td",Oe,[d(p,{type:"checkbox",modelValue:t.checkedRows[a.id],"onUpdate:modelValue":c=>t.checkedRows[a.id]=c},null,8,["modelValue","onUpdate:modelValue"])]),(C=t.columns.find(c=>c.name==="From"))!=null&&C.active?(l(),m("td",Ue,[n("div",Ne,[b(f(a.from.name)+" ",1),n("span",Le,"("+f(a.from.number)+")",1)])])):g("",!0),(A=t.columns.find(c=>c.name==="To"))!=null&&A.active?(l(),m("td",Re,[n("div",qe,[b(f(a.to.name)+" ",1),n("span",je,"("+f(a.to.number)+")",1)])])):g("",!0),(z=t.columns.find(c=>c.name==="Direction"))!=null&&z.active?(l(),m("td",Be,[a.direction=="inbound"?(l(),x(W,{key:0,size:"16",class:"text-indigo-500 mx-auto"})):(l(),x(G,{key:1,size:"16",class:"text-orange-500 mx-auto"}))])):g("",!0),(E=t.columns.find(c=>c.name==="Status"))!=null&&E.active?(l(),m("td",Ze,[d(H,{type:s.getStatusPillType(a.status),size:"xs"},{default:w(()=>[b(f(a.status),1)]),_:2},1032,["type"])])):g("",!0),(I=t.columns.find(c=>c.name==="Agent"))!=null&&I.active?(l(),m("td",Ke,[n("span",null,f(a.agent?a.agent.name:"N/A"),1)])):g("",!0),(F=t.columns.find(c=>c.name==="Department"))!=null&&F.active?(l(),m("td",We,[n("span",null,f(a.department?a.department.name:"N/A"),1)])):g("",!0),(V=t.columns.find(c=>c.name==="Transfers"))!=null&&V.active?(l(),m("td",Ge,[n("span",null,f(a.transfers_count),1)])):g("",!0),(O=t.columns.find(c=>c.name==="Listen Often"))!=null&&O.active?(l(),m("td",He,[n("span",null,f(a.listenFrequency||"N/A"),1)])):g("",!0),(U=t.columns.find(c=>c.name==="Mood"))!=null&&U.active?(l(),m("td",Je,[n("span",null,f(a.mood||"N/A"),1)])):g("",!0),(N=t.columns.find(c=>c.name==="Created Date"))!=null&&N.active?(l(),m("td",Ye,[n("div",Qe,[n("span",null,f(s.formattedDatetime(a.created_at)),1),d(M,{placement:"top",class:"opacity-0 group-hover:opacity-100",content:s.formattedRelativeDate(a.created_at)},null,8,["content"])])])):g("",!0),n("td",Xe,[d(h,{type:"outlineDanger",size:"xs",leftIcon:t.Trash2,leftIconSize:"12",action:()=>s.showDeleteCallModal(a)},null,8,["leftIcon","action"]),a.status==="In Progress"?(l(),x(h,{key:0,type:"outline",size:"xs",leftIcon:t.Ear,leftIconSize:"12",action:()=>s.listenToCall(a),class:"relative"},null,8,["leftIcon","action"])):g("",!0),d(h,{type:"outline",size:"xs",leftIcon:t.Play,leftIconSize:"12",action:()=>s.downloadRecording(a),disabled:!a.recordingUrl,class:"relative"},{default:w(()=>[a.recordingUrl?g("",!0):(l(),x(M,{key:0,placement:"top",class:"opacity-0 group-hover:opacity-100",content:"No recording available for download"}))]),_:2},1032,["leftIcon","action","disabled"]),d(h,{type:"outline",size:"xs",leftIcon:t.Download,leftIconSize:"12",action:()=>s.downloadRecording(a),disabled:!a.recordingUrl,class:"relative"},{default:w(()=>[a.recordingUrl?g("",!0):(l(),x(M,{key:0,placement:"top",class:"opacity-0 group-hover:opacity-100",content:"No recording available for download"}))]),_:2},1032,["leftIcon","action","disabled"])])],2)}),128))]),_:1},8,["onSearch","columns","perPage","onPaginate","onRefresh","searchTerm","pagination","isLoading","onUpdatedColumns","onUpdatedFilters","onUpdatedSorting","onUpdatedPerPage","filterExpressions","sortingExpressions"])])])],64)):(l(),m("div",$e,[n("div",et,[d(y,{size:"48",class:"text-gray-400"}),e[7]||(e[7]=n("h2",{class:"text-2xl font-bold text-gray-800"},"No Calls Yet",-1)),e[8]||(e[8]=n("p",{class:"text-sm text-gray-500"},"Add a call to start managing communications.",-1)),d(h,{type:"primary",size:"md",leftIcon:t.Phone,leftIconSize:"20",action:s.showAddCallModal},{default:w(()=>e[6]||(e[6]=[n("span",null,"Add Call",-1)])),_:1},8,["leftIcon","action"])])])),d(Y,{ref:"addCallModal",onCreated:s.fetchCalls},null,8,["onCreated"]),d(Q,{ref:"deleteCallModal",onDeleted:s.onCallDeleted},null,8,["onDeleted"]),d(X,{ref:"deleteCallsModal",onDeleted:s.onCallsDeleted},null,8,["onDeleted"])])}const xt=k(Te,[["render",tt]]);export{xt as default};
