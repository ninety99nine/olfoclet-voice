import{j as S,m as U,w as g,r as p,o as n,a,d,b as f,k as B,c as m,F as x,e as T,t as w,H as W,h as v,n as M}from"./app-Du355Hwa.js";import{S as V,M as b,T as J,P as G,i as R,a as P}from"./Table-Ukz-LVMs.js";import{I as D,P as H}from"./Input-Ce6sOWCE.js";import{B as I}from"./Button-QuQuG-sh.js";import{f as Y,a as K,D as Q}from"./dateUtils-BxSzW5yy.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as X}from"./Switch-C9_nwvxw.js";import{C as Z}from"./circle-alert-BxAnEgKy.js";import{U as $}from"./user-round-CFXd3Zxh.js";import{B as F}from"./building-De0W7STi.js";import{E as ee}from"./external-link-CpO9C08d.js";import{P as se}from"./pencil-CpKEG2hD.js";import{P as te}from"./plus-Cw5wWZrK.js";import"./createLucideIcon-CQR3ABw7.js";import"./Tooltip-Bh561etO.js";import"./Drawer-EX-MXofE.js";import"./arrow-up-CiGeyIVi.js";import"./vue-draggable-next.esm-bundler-Bt-FJ2_7.js";import"./mail-CmabDzCr.js";const oe={components:{Modal:b,Input:D,Select:V,Button:I},inject:["formState","notificationState"],data(){return{isCreating:!1,isLoadingOrganizations:!1,isLoadingRoles:!1,form:{name:"",email:"",type:"",organization_id:null,role_id:null},userTypes:[{label:"Super Admin",value:"super_admin"},{label:"Regular",value:"regular"}],organizationOptions:[],roleOptions:[]}},computed:{organizationId(){return this.$route.query.organization_id||null}},watch:{organizationId(t){t?(this.form.type="regular",this.form.organization_id=t,this.fetchRoles(t)):(this.form.type="",this.form.organization_id=null,this.form.role_id=null,this.roleOptions=[])},"form.type"(t){t!=="regular"&&(this.organizationId||(this.form.organization_id=null),this.form.role_id=null,this.roleOptions=[])},"form.organization_id"(t){t&&this.form.type==="regular"?this.fetchRoles(t):(this.form.role_id=null,this.roleOptions=[])}},methods:{showModal(){this.reset(),this.organizationId?this.fetchRoles(this.organizationId):this.fetchOrganizations(),this.$refs.modal.showModal()},reset(){this.form.name="",this.form.email="",this.form.type=this.organizationId?"regular":"",this.form.organization_id=this.organizationId||null,this.form.role_id=null,this.roleOptions=[]},async fetchOrganizations(){var t,s,i;try{this.isLoadingOrganizations=!0;const o=await S.get("/api/organizations");this.organizationOptions=(((t=o.data)==null?void 0:t.data)??[]).map(e=>({label:e.name,value:e.id}))}catch(o){const e=((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||(o==null?void 0:o.message)||"Failed to load organizations";this.notificationState.showWarningNotification(e),console.error("Failed to load organizations:",o)}finally{this.isLoadingOrganizations=!1}},async fetchRoles(t){var s,i,o;if(t)try{this.isLoadingRoles=!0;const e=await S.get("/api/roles",{params:{organization_id:t}});this.roleOptions=(((s=e.data)==null?void 0:s.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(e){const r=((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.message)||(e==null?void 0:e.message)||"Failed to load roles";this.notificationState.showWarningNotification(r),console.error("Failed to load roles:",e)}finally{this.isLoadingRoles=!1}},async createUser(t){var s,i;if(this.formState.hideFormErrors(),this.form.name.trim()===""&&this.formState.setFormError("name","Name is required"),this.form.email.trim()===""&&this.formState.setFormError("email","Email is required"),this.organizationId||(this.form.type===""&&this.formState.setFormError("type","User type is required"),this.form.type==="regular"&&!this.form.organization_id&&this.formState.setFormError("organization_id","Organization is required")),this.form.type==="regular"&&!this.form.role_id&&this.formState.setFormError("role_id","Role is required"),!this.formState.hasErrors){this.isCreating=!0;try{const o={...this.form,type:this.organizationId?"regular":this.form.type,organization_id:this.organizationId||this.form.organization_id};await S.post("/api/users",o),this.notificationState.showSuccessNotification("User created. An email has been sent to the user to set their password."),this.$emit("created"),t()}catch(o){const e=((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||(o==null?void 0:o.message)||"Something went wrong trying to create the user";this.notificationState.showWarningNotification(e),this.formState.setServerFormErrors(o),console.error("Failed to create user:",o)}finally{this.isCreating=!1}}}}},re={class:"space-y-4"};function ie(t,s,i,o,e,r){const h=p("Input"),u=p("Select"),z=p("Modal");return n(),U(z,{size:"sm",ref:"modal",showFooter:!0,dismissable:!0,scrollOnContent:!1,showApproveButton:!0,header:"Create New User",approveText:"Create User",approveAction:r.createUser,approveLoading:e.isCreating,subheader:"Add a new user to the platform"},{trigger:g(c=>[B(t.$slots,"default",{showModal:c.showModal})]),content:g(()=>[a("div",re,[d(h,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=c=>e.form.name=c),showAsterisk:!0,label:"Full Name",placeholder:"Jane Doe",errorText:r.formState.getFormError("name")},null,8,["modelValue","errorText"]),d(h,{type:"email",modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=c=>e.form.email=c),showAsterisk:!0,label:"Email Address",placeholder:"jane@example.com",errorText:r.formState.getFormError("email")},null,8,["modelValue","errorText"]),r.organizationId?f("",!0):(n(),U(u,{key:0,label:"Type",search:!1,modelValue:e.form.type,"onUpdate:modelValue":s[2]||(s[2]=c=>e.form.type=c),showAsterisk:!0,options:e.userTypes,placeholder:"Select user type",errorText:r.formState.getFormError("type")},null,8,["modelValue","options","errorText"])),!r.organizationId&&e.form.type==="regular"?(n(),U(u,{key:1,modelValue:e.form.organization_id,"onUpdate:modelValue":s[3]||(s[3]=c=>e.form.organization_id=c),options:e.organizationOptions,showAsterisk:!0,label:"Organization",placeholder:"Select organization",errorText:r.formState.getFormError("organization_id"),disabled:e.isLoadingOrganizations},null,8,["modelValue","options","errorText","disabled"])):f("",!0),e.form.type==="regular"?(n(),U(u,{key:2,modelValue:e.form.role_id,"onUpdate:modelValue":s[4]||(s[4]=c=>e.form.role_id=c),options:e.roleOptions,showAsterisk:!0,label:"Role",placeholder:"Select role",errorText:r.formState.getFormError("role_id"),disabled:e.isLoadingRoles||!e.form.organization_id},null,8,["modelValue","options","errorText","disabled"])):f("",!0)])]),_:3},8,["approveAction","approveLoading"])}const ae=E(oe,[["render",ie]]),ne={name:"UpdateUserModal",inject:["formState","notificationState"],components:{Modal:b,Input:D,Select:V,Switch:X,Button:I},data(){return{isUpdating:!1,resetPassword:!1,user:null,form:{name:"",email:"",type:"",password:""},userTypes:[{label:"Super Admin",value:"super_admin"},{label:"Regular",value:"regular"}]}},methods:{showModal(t){this.reset(),this.user=t,this.form.name=t.name,this.form.email=t.email,this.form.type=t.type,this.$refs.modal.showModal()},reset(){this.form.name="",this.form.email="",this.form.type="",this.form.password="",this.resetPassword=!1,this.user=null},generatePassword(){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*()";let s="";for(let i=0;i<12;i++)s+=t.charAt(Math.floor(Math.random()*t.length));this.form.password=s},async updateUser(t){var s,i;if(this.formState.hideFormErrors(),this.form.name.trim()===""&&this.formState.setFormError("name","Name is required"),this.form.email.trim()===""&&this.formState.setFormError("email","Email is required"),this.form.type||this.formState.setFormError("type","User type is required"),this.resetPassword&&this.form.password.trim()===""&&this.formState.setFormError("password","Password is required"),!this.formState.hasErrors){this.isUpdating=!0;try{const o=this.user._links.update_user,e={name:this.form.name,email:this.form.email,type:this.form.type};this.resetPassword&&(e.password=this.form.password),await S.put(o,e),this.notificationState.showSuccessNotification("User updated"),this.$emit("updated"),t()}catch(o){const e=((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||(o==null?void 0:o.message)||"Something went wrong updating the user";this.notificationState.showWarningNotification(e),this.formState.setServerFormErrors(o),console.error("Failed to update user:",o)}finally{this.isUpdating=!1}}}}},le={class:"space-y-4"},de={class:"border-t border-gray-200 border-dashed space-y-4 pt-4"},me={class:"flex justify-end"};function pe(t,s,i,o,e,r){const h=p("Input"),u=p("Select"),z=p("Switch"),c=p("Button"),k=p("Modal");return n(),U(k,{size:"sm",ref:"modal",showFooter:!0,dismissable:!0,scrollOnContent:!1,showApproveButton:!0,approveLoading:e.isUpdating,header:"Update User",approveText:"Update User",approveAction:r.updateUser,subheader:"Modify the user's details"},{content:g(()=>[a("div",le,[d(h,{modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=y=>e.form.name=y),showAsterisk:!0,label:"Full Name",placeholder:"Jane Doe",errorText:r.formState.getFormError("name")},null,8,["modelValue","errorText"]),d(h,{type:"email",modelValue:e.form.email,"onUpdate:modelValue":s[1]||(s[1]=y=>e.form.email=y),showAsterisk:!0,label:"Email Address",placeholder:"jane@example.com",errorText:r.formState.getFormError("email")},null,8,["modelValue","errorText"]),d(u,{label:"Type",search:!1,modelValue:e.form.type,"onUpdate:modelValue":s[2]||(s[2]=y=>e.form.type=y),showAsterisk:!0,options:e.userTypes,placeholder:"Select user type",errorText:r.formState.getFormError("type")},null,8,["modelValue","options","errorText"]),a("div",de,[d(z,{size:"sm",modelValue:e.resetPassword,"onUpdate:modelValue":s[3]||(s[3]=y=>e.resetPassword=y),suffixText:"Reset Password"},null,8,["modelValue"]),e.resetPassword?(n(),m(x,{key:0},[d(h,{copy:!0,class:"w-full",type:"password",label:"New Password",modelValue:e.form.password,"onUpdate:modelValue":s[4]||(s[4]=y=>e.form.password=y),placeholder:"Enter new password",errorText:r.formState.getFormError("password")},null,8,["modelValue","errorText"]),a("div",me,[d(c,{size:"xs",type:"ghost",action:r.generatePassword},{default:g(()=>s[5]||(s[5]=[a("span",null,"Generate Password",-1)])),_:1},8,["action"])])],64)):f("",!0)])])]),_:1},8,["approveLoading","approveAction"])}const he=E(ne,[["render",pe]]),ce={components:{Modal:b},inject:["notificationState"],data(){return{user:null,isDeleting:!1}},methods:{showModal(t){this.user=t,this.$refs.modal.showModal()},async onDelete(t){var s,i,o;if(this.user){this.isDeleting=!0;try{const e=this.user._links.delete_user,r=await S.delete(e);(s=r==null?void 0:r.data)!=null&&s.message&&this.notificationState.showSuccessNotification(r.data.message),this.$emit("deleted",this.user.id),t()}catch(e){const r=((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.message)||(e==null?void 0:e.message)||"Something went wrong while deleting the user";this.notificationState.showWarningNotification(r)}finally{this.isDeleting=!1}}}}},ue={key:0,class:"text-sm text-gray-700 dark:text-neutral-400"},fe={class:"font-bold text-black"};function ge(t,s,i,o,e,r){const h=p("Modal");return n(),U(h,{size:"sm",ref:"modal",approveType:"danger",header:"Confirm Delete",isLoading:e.isDeleting,approveAction:r.onDelete,approveText:"Delete User"},{content:g(()=>[e.user?(n(),m("p",ue,[s[0]||(s[0]=T(" Are you sure you want to permanently delete ")),a("span",fe,w(e.user.name),1),s[1]||(s[1]=T("? "))])):f("",!0)]),_:1},8,["isLoading","approveAction"])}const ye=E(ce,[["render",ge]]),we={inject:["notificationState"],components:{Modal:b,CircleAlert:Z},data(){return{isDeleting:!1,userIds:[]}},computed:{total(){return this.userIds.length},approveText(){return this.total===1?"Delete User":"Delete Users"}},methods:{showModal(t=[]){this.userIds=t,this.$refs.modal.showModal()},async onDelete(t){var s,i,o;if(!(this.isDeleting||this.userIds.length===0)){this.isDeleting=!0;try{const e="/api/users",r={data:{user_ids:this.userIds}},h=await S.delete(e,r),u=(s=h==null?void 0:h.data)==null?void 0:s.message;u&&this.notificationState.showSuccessNotification(u),this.$emit("deleted",this.userIds),t()}catch(e){const r=((o=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:o.message)||(e==null?void 0:e.message)||"Something went wrong while deleting users";this.notificationState.showWarningNotification(r)}finally{this.isDeleting=!1}}}}},_e={class:"flex space-x-2 items-center p-4 text-xs bg-red-50 text-red-500 border border-red-200 border-dashed rounded-lg mb-8"};function xe(t,s,i,o,e,r){const h=p("CircleAlert"),u=p("Modal");return n(),U(u,{size:"sm",ref:"modal",approveType:"danger",approveIcon:"delete",isLoading:e.isDeleting,approveAction:r.onDelete,approveText:r.approveText,header:"Delete Users"},{content:g(()=>[a("div",_e,[d(h,{size:"20"}),a("span",null," Are you sure you want to delete "+w(r.total>1?`these ${r.total} users`:"this 1 user")+"? ",1)])]),_:1},8,["isLoading","approveAction","approveText"])}const Ue=E(we,[["render",xe]]),Se={inject:["formState","notificationState"],components:{Pill:G,Modal:b,Input:D,Button:I,Popover:H,Dropdown:Q,Table:J,Building:F,AddUserModal:ae,UpdateUserModal:he,DeleteUserModal:ye,DeleteUsersModal:Ue,UserRoundIcon:$},data(){return{Plus:te,Pencil:se,Trash2:P,Building:F,users:[],columns:[],ExternalLink:ee,perPage:"15",displayRows:[],checkedRows:[],pagination:null,searchTerm:null,selectAll:!1,filterExpressions:[],isLoadingUsers:!1,sortingExpressions:[],dropdownOptions:[{icon:P,label:"Delete",action:this.showDeleteUsersModal}]}},computed:{authState(){return W()},organizationId(){return this.$route.query.organization_id||null},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""},totalCheckedRows(){return Object.values(this.checkedRows).filter(t=>t).length},hasFilterExpressions(){return this.filterExpressions.length>0},hasSortingExpressions(){return this.sortingExpressions.length>0},showTable(){var t;return this.isLoadingUsers||((t=(this.pagination??{}).meta)==null?void 0:t.total)>0||this.hasSearchTerm||this.hasFilterExpressions||this.hasSortingExpressions}},watch:{selectAll(t){this.checkedRows=this.displayRows.reduce((s,i)=>(s[i.key]=t,s),{})},users(t){this.updateDisplayRows()}},methods:{formattedDatetime:K,formattedRelativeDate:Y,prepareColumns(){const t=["Name","Email","Role","Created Date"],s=["Name","Email","Organization","Role","Created Date"],i=this.organizationId?t:s,o=i;return i.map(e=>({name:e,active:o.includes(e),priority:o.includes(e)}))},updateDisplayRows(){this.displayRows=[],this.organizationId?this.users.forEach(t=>{const s=t.roles&&t.roles.length>0?t.roles[0]:null;this.displayRows.push({key:t.id,user:t,role:s,showName:!0})}):this.users.forEach(t=>{t.roles&&t.roles.length>0?t.roles.forEach((s,i)=>{const o=s.organization||null;this.displayRows.push({key:`${t.id}-${s.id}`,user:t,role:s,organization:o,showName:i===0})}):this.displayRows.push({key:t.id,user:t,role:null,organization:null,showName:!0})})},showAddUsersModal(){this.$refs.addUserModal.showModal()},showUpdateUserModal(t){this.$refs.updateUserModal.showModal(t)},showDeleteUserModal(t){this.$refs.deleteUserModal.showModal(t)},showDeleteUsersModal(){const t=Object.keys(this.checkedRows).filter(s=>this.checkedRows[s]).map(s=>{const[i]=s.split("-");return i});this.$refs.deleteUsersModal.showModal(t)},onUserDeleted(t){this.users=this.users.filter(s=>s.id!==t),this.users.length===0&&this.fetchUsers()},onUsersDeleted(t=[]){t.forEach(s=>{Object.keys(this.checkedRows).forEach(i=>{(i.startsWith(`${s}-`)||i===s)&&(this.checkedRows[i]=!1)})}),this.selectAll=!1,this.users=this.users.filter(s=>!t.includes(s.id)),this.users.length===0&&this.fetchUsers()},paginate(t){this.fetchUsers(t)},search(t){this.searchTerm=t,this.fetchUsers()},updatedColumns(t){this.columns=t},updatedFilters(t){const s=t.map(i=>i.expression);R(this.filterExpressions,s)||(this.filterExpressions=s,this.fetchUsers())},updatedSorting(t){const s=t.map(i=>i.expression);R(this.sortingExpressions,s)||(this.sortingExpressions=s,this.fetchUsers())},updatedPerPage(t){this.perPage=t,this.fetchUsers()},async fetchUsers(t=null){var s,i;try{this.isLoadingUsers=!0,t=t??"/api/users";let o={params:{per_page:this.perPage,_relationships:"roles"+(this.organizationId?"":".organization"),_countable_relationships:"organizations"}};this.organizationId&&(o.params.organization_id=this.organizationId),this.hasSearchTerm&&(o.params.search=this.searchTerm),this.hasFilterExpressions&&(o.params._filters=this.filterExpressions.join("|")),this.hasSortingExpressions&&(o.params._sort=this.sortingExpressions.join("|"));const e=await S.get(t,o);this.pagination=e.data,this.users=this.pagination.data,this.checkedRows=this.displayRows.reduce((r,h)=>(r[h.key]=!1,r),{})}catch(o){const e=((i=(s=o==null?void 0:o.response)==null?void 0:s.data)==null?void 0:i.message)||(o==null?void 0:o.message)||"Something went wrong while fetching users";this.notificationState.showWarningNotification(e),console.error("Failed to fetch users:",o)}finally{this.isLoadingUsers=!1}}},mounted(){this.columns=this.prepareColumns()},created(){this.isLoadingUsers=!0,this.searchTerm=this.$route.query.searchTerm,this.$route.query.filterExpressions&&(this.filterExpressions=this.$route.query.filterExpressions.split("|")),this.$route.query.sortingExpressions&&(this.sortingExpressions=this.$route.query.sortingExpressions.split("|")),this.fetchUsers()}},ze={class:"select-none min-h-screen bg-gray-50 pt-8 p-4 sm:p-8 space-y-4 sm:space-y-6"},be={class:"flex justify-between"},Ee={class:"flex items-end space-x-2"},ke={class:"text-sm text-gray-600 dark:text-neutral-400"},ve={class:"flex justify-end"},Me={class:"border-b border-indigo-200"},Te={scope:"col",class:"whitespace-nowrap align-top font-semibold px-4 py-2.5"},De={class:"whitespace-nowrap align-center px-4 py-4"},Ie={key:0,class:"whitespace-nowrap align-center pr-4 py-4"},Ae={key:0},Re={key:1,class:"whitespace-nowrap align-center pr-4 py-4"},Pe={key:0},Fe={key:2,class:"whitespace-nowrap align-center pr-4 py-4"},Ve={class:"flex items-center space-x-2"},Ce={key:0,src:"https://placehold.co/21x24",class:"size-8 rounded-lg shrink-0",alt:"Logo"},Ne={class:"whitespace-nowrap"},Le={key:3,class:"whitespace-nowrap align-center pr-4 py-4"},Oe={key:1,class:"text-gray-500"},je={key:4,class:"whitespace-nowrap align-center pr-4 py-4"},qe={class:"flex space-x-1 items-center"},Be={class:"h-16 pr-4 py-4 flex align-middle items-center space-x-2"},We={key:1,class:"select-none w-full flex justify-center py-16"},Je={class:"max-w-sm w-full bg-white shadow-sm rounded-xl p-6 flex flex-col items-center text-center space-y-4 border border-dashed border-gray-200"};function Ge(t,s,i,o,e,r){const h=p("UserRoundIcon"),u=p("Button"),z=p("Dropdown"),c=p("Input"),k=p("Pill"),y=p("Popover"),C=p("Table"),N=p("AddUserModal"),L=p("UpdateUserModal"),O=p("DeleteUserModal"),j=p("DeleteUsersModal");return n(),m("div",ze,[r.showTable?(n(),m(x,{key:0},[a("div",be,[a("div",Ee,[d(h,{size:"48","stroke-width":"1",class:"text-gray-400"}),a("div",null,[s[1]||(s[1]=a("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Users",-1)),a("p",ke,w(r.organizationId?"Manage users in your organization":"Manage all users across organizations"),1)])]),a("div",ve,[d(u,{type:"primary",size:"md",leftIcon:e.Plus,leftIconSize:"20",action:r.showAddUsersModal},{default:g(()=>s[2]||(s[2]=[a("span",null,"Add User",-1)])),_:1},8,["leftIcon","action"])])]),d(C,{onSearch:r.search,resource:"users",columns:e.columns,perPage:e.perPage,onPaginate:r.paginate,onRefresh:r.fetchUsers,searchTerm:e.searchTerm,pagination:e.pagination,isLoading:e.isLoadingUsers,onUpdatedColumns:r.updatedColumns,onUpdatedFilters:r.updatedFilters,onUpdatedSorting:r.updatedSorting,onUpdatedPerPage:r.updatedPerPage,filterExpressions:e.filterExpressions,sortingExpressions:e.sortingExpressions},{belowToolbar:g(()=>[a("div",{class:M([{hidden:r.totalCheckedRows===0},"bg-gray-50 border flex items-center mb-2 p-4 rounded-lg shadow space-x-2"])},[s[3]||(s[3]=a("span",{class:"text-sm"},"Actions: ",-1)),d(z,{triggerSize:"sm",options:e.dropdownOptions,triggerText:`Select Action (${r.totalCheckedRows} selected)`},null,8,["options","triggerText"])],2)]),head:g(()=>[a("tr",Me,[a("th",Te,[d(c,{type:"checkbox",modelValue:e.selectAll,"onUpdate:modelValue":s[0]||(s[0]=l=>e.selectAll=l)},null,8,["modelValue"])]),(n(!0),m(x,null,v(e.columns,(l,A)=>(n(),m(x,{key:A},[l.active?(n(),m("th",{key:0,scope:"col",class:M(["whitespace-nowrap align-top font-semibold pr-4 py-2.5",{"text-center":["Users"].includes(l.name)}])},w(l.name),3)):f("",!0)],64))),128)),s[4]||(s[4]=a("th",{scope:"col",class:"whitespace-nowrap align-top font-semibold pr-4 py-2.5"},"Actions",-1))])]),body:g(()=>[(n(!0),m(x,null,v(e.displayRows,(l,A)=>(n(),m("tr",{key:l.key,class:M([e.checkedRows[l.key]?"bg-blue-50":"bg-white hover:bg-gray-50","group cursor-pointer text-sm border-b border-gray-200"])},[a("td",De,[d(c,{type:"checkbox",modelValue:e.checkedRows[l.key],"onUpdate:modelValue":_=>e.checkedRows[l.key]=_},null,8,["modelValue","onUpdate:modelValue"])]),(n(!0),m(x,null,v(e.columns,(_,q)=>(n(),m(x,{key:q},[_.active?(n(),m(x,{key:0},[_.name=="Name"?(n(),m("td",Ie,[l.showName?(n(),m("div",Ae,w(l.user.name),1)):f("",!0)])):f("",!0),_.name=="Email"?(n(),m("td",Re,[l.showName?(n(),m("span",Pe,w(l.user.email),1)):f("",!0)])):f("",!0),_.name=="Organization"&&!r.organizationId?(n(),m("td",Fe,[a("div",Ve,[l.organization?(n(),m("img",Ce)):f("",!0),a("div",Ne,w(l.organization?l.organization.name:"—"),1)])])):f("",!0),_.name=="Role"?(n(),m("td",Le,[l.role?(n(),U(k,{key:0,type:["admin","super_admin"].includes(l.role.name)?"primary":"success",size:"xs"},{default:g(()=>[T(w(l.role.name),1)]),_:2},1032,["type"])):(n(),m("span",Oe,"—"))])):f("",!0),_.name=="Created Date"?(n(),m("td",je,[a("div",qe,[a("span",null,w(r.formattedDatetime(l.user.created_at)),1),d(y,{placement:"top",class:"opacity-0 group-hover:opacity-100",content:r.formattedRelativeDate(l.user.created_at)},null,8,["content"])])])):f("",!0)],64)):f("",!0)],64))),128)),a("td",Be,[d(u,{type:"bare",size:"xs",leftIcon:e.Pencil,leftIconSize:"16",action:()=>r.showUpdateUserModal(l.user)},null,8,["leftIcon","action"]),d(u,{type:"bareDanger",size:"xs",leftIcon:e.Trash2,leftIconSize:"16",action:()=>r.showDeleteUserModal(l.user)},null,8,["leftIcon","action"])])],2))),128))]),_:1},8,["onSearch","columns","perPage","onPaginate","onRefresh","searchTerm","pagination","isLoading","onUpdatedColumns","onUpdatedFilters","onUpdatedSorting","onUpdatedPerPage","filterExpressions","sortingExpressions"])],64)):(n(),m("div",We,[a("div",Je,[d(h,{size:"48",class:"text-gray-400"}),s[6]||(s[6]=a("h2",{class:"text-2xl font-bold text-gray-800"},"No Users Yet",-1)),s[7]||(s[7]=a("p",{class:"text-sm text-gray-500"},"Add your first user to start managing the platform.",-1)),d(u,{type:"primary",size:"md",leftIcon:e.Plus,leftIconSize:"20",action:r.showAddUsersModal},{default:g(()=>s[5]||(s[5]=[a("span",null,"Add User",-1)])),_:1},8,["leftIcon","action"])])])),d(N,{ref:"addUserModal",onCreated:r.fetchUsers},null,8,["onCreated"]),d(L,{ref:"updateUserModal",onUpdated:r.fetchUsers},null,8,["onUpdated"]),d(O,{ref:"deleteUserModal",onDeleted:r.onUserDeleted},null,8,["onDeleted"]),d(j,{ref:"deleteUsersModal",onDeleted:r.onUsersDeleted},null,8,["onDeleted"])])}const hs=E(Se,[["render",Ge]]);export{hs as default};
