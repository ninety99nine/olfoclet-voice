import{j as S,m as z,w as x,r as h,o as n,a,d,c as m,b,e as I,F as C,h as E,I as M,J as F,t as g,k as R,n as P,K as O,G as Y}from"./app-Du355Hwa.js";import{S as N,M as T,a as V,T as Q,P as X,i as B}from"./Table-Ukz-LVMs.js";import{I as D,P as $}from"./Input-Ce6sOWCE.js";import{B as L}from"./Button-QuQuG-sh.js";import{f as tt,a as et,D as st}from"./dateUtils-BxSzW5yy.js";import{S as j}from"./SelectTags-D2CZRuy3.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{P as q}from"./plus-Cw5wWZrK.js";import{c as G}from"./createLucideIcon-CQR3ABw7.js";import{C as H}from"./circle-alert-BxAnEgKy.js";import{C as W}from"./contact-DFld7txJ.js";import{P as ot}from"./pencil-CpKEG2hD.js";import"./Tooltip-Bh561etO.js";import"./Drawer-EX-MXofE.js";import"./arrow-up-CiGeyIVi.js";import"./Switch-C9_nwvxw.js";import"./vue-draggable-next.esm-bundler-Bt-FJ2_7.js";import"./mail-CmabDzCr.js";/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=G("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-vue-next v0.488.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const at=G("cloud-upload",[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]]);function Z(o){return o?o.charAt(0).toUpperCase()+o.slice(1):""}const it={components:{Modal:T,Input:D,Button:L,Select:N,SelectTags:j},inject:["formState","notificationState"],data(){return{Plus:q,Trash2:V,isCreating:!1,form:{organization_id:null,custom_attributes:{},emails:[{value:"",is_primary:!0}],phone_numbers:[{value:"",is_primary:!0}],tags:[]},organizationOptions:[],customAttributes:[],tagOptions:[],primaryPhoneIndex:0,primaryEmailIndex:0}},methods:{showModal(){this.reset(),this.fetchOrganizations(),this.$refs.modal.showModal()},reset(){this.form.organization_id=null,this.form.custom_attributes={},this.form.phone_numbers=[{value:"",is_primary:!0}],this.form.emails=[{value:"",is_primary:!0}],this.form.tags=[],this.customAttributes=[],this.tagOptions=[],this.primaryPhoneIndex=0,this.primaryEmailIndex=0,this.formState.hideFormErrors()},async fetchOrganizations(){var o;try{const t=await S.get("/api/organizations");this.organizationOptions=(((o=t.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(t){console.error("Failed to load organizations:",t)}},async fetchCustomAttributes(){var o;if(!this.form.organization_id){this.customAttributes=[],this.form.custom_attributes={};return}try{const t=await S.get("/api/custom-attributes",{params:{organization_id:this.form.organization_id}});this.customAttributes=((o=t.data)==null?void 0:o.data)??[],this.form.custom_attributes=this.customAttributes.reduce((r,i)=>(r[i.name]="",r),{})}catch(t){console.error("Failed to load custom attributes:",t)}},async fetchTags(){var o;if(!this.form.organization_id){this.tagOptions=[];return}try{const t=await S.get("/api/tags",{params:{organization_id:this.form.organization_id}});this.tagOptions=(((o=t.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.name}))}catch(t){console.error("Failed to load tags:",t)}},async onOrganizationChange(){await Promise.all([this.fetchCustomAttributes(),this.fetchTags()])},addPhoneNumber(){this.form.phone_numbers.push({value:"",is_primary:!1})},removePhoneNumber(o){this.form.phone_numbers[o].is_primary&&(this.form.phone_numbers[0].is_primary=!0,this.primaryPhoneIndex=0),this.form.phone_numbers.splice(o,1),this.primaryPhoneIndex>=this.form.phone_numbers.length&&(this.primaryPhoneIndex=this.form.phone_numbers.length-1)},setPrimaryPhone(o){this.form.phone_numbers.forEach((t,r)=>{t.is_primary=r===o}),this.primaryPhoneIndex=o},addEmail(){this.form.emails.push({value:"",is_primary:!1})},removeEmail(o){this.form.emails[o].is_primary&&(this.form.emails[0].is_primary=!0,this.primaryEmailIndex=0),this.form.emails.splice(o,1),this.primaryEmailIndex>=this.form.emails.length&&(this.primaryEmailIndex=this.form.emails.length-1)},setPrimaryEmail(o){this.form.emails.forEach((t,r)=>{t.is_primary=r===o}),this.primaryEmailIndex=o},async createContact(o){var i,s;this.formState.hideFormErrors(),this.form.organization_id||this.formState.setFormError("organization_id","Organization is required"),(!this.form.custom_attributes.name||this.form.custom_attributes.name.trim()==="")&&this.formState.setFormError("custom_attributes.name","Name is required");const t=this.form.phone_numbers.filter(e=>e.value.trim()!=="");t.length===0?this.formState.setFormError("phone_numbers","At least one phone number is required"):t.forEach((e,c)=>{e.value.match(/^\+[1-9]\d{1,14}$/)||this.formState.setFormError(`phone_numbers.${c}.value`,"Phone number must be in E.164 format (e.g., +1234567890)")});const r=this.form.emails.filter(e=>e.value.trim()!=="");if(r.forEach((e,c)=>{e.value.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)||this.formState.setFormError(`emails.${c}.value`,"Email address must be valid (e.g., example@domain.com)")}),!this.formState.hasErrors){this.isCreating=!0;try{const e={identifiers:[],tags:this.form.tags,custom_attributes:[],organization_id:this.form.organization_id};t.forEach(c=>{e.identifiers.push({type:"phone",value:c.value,is_primary:c.is_primary})}),r.forEach(c=>{e.identifiers.push({type:"email",value:c.value,is_primary:c.is_primary})});for(const[c,p]of Object.entries(this.form.custom_attributes))if(p&&p.trim()!==""){const y=this.customAttributes.find(v=>v.name===c);y&&e.custom_attributes.push({custom_attribute_id:y.id,name:y.name,type:y.type,value:p})}await S.post("/api/contacts",e,{params:{organization_id:this.form.organization_id}}),this.notificationState.showSuccessNotification("Contact created"),this.$emit("created"),o()}catch(e){const c=((s=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:s.message)||(e==null?void 0:e.message)||"Something went wrong trying to create the contact";this.notificationState.showWarningNotification(c),this.formState.setServerFormErrors(e),console.error("Failed to create contact:",e)}finally{this.isCreating=!1}}}}},nt={class:"space-y-4"},lt={class:"space-y-2"},mt={class:"flex items-center space-x-1"},ct=["value","onChange","disabled"],ut={key:0,class:"text-sm text-red-600"},pt={class:"space-y-2"},dt={class:"flex items-center space-x-1"},ht=["value","onChange","disabled"],ft={key:0,class:"text-sm text-red-600"};function gt(o,t,r,i,s,e){const c=h("Select"),p=h("Input"),y=h("Button"),v=h("SelectTags"),A=h("Modal");return n(),z(A,{size:"sm",ref:"modal",showFooter:!0,dismissable:!0,scrollOnContent:!1,showApproveButton:!0,header:"Create New Contact",approveText:"Create Contact",approveLoading:s.isCreating,approveAction:e.createContact,subheader:"Add a new contact to the platform"},{trigger:x(u=>[R(o.$slots,"default",{showModal:u.showModal})]),content:x(()=>[a("div",nt,[d(c,{showAsterisk:!0,label:"Organization",modelValue:s.form.organization_id,"onUpdate:modelValue":t[0]||(t[0]=u=>s.form.organization_id=u),options:s.organizationOptions,onChange:e.onOrganizationChange,placeholder:"Select organization",errorText:e.formState.getFormError("organization_id")},null,8,["modelValue","options","onChange","errorText"]),a("div",lt,[t[6]||(t[6]=a("label",{class:"block text-sm font-medium text-gray-700"},[I(" Phone Number "),a("span",{class:"text-red-500"},"*")],-1)),(n(!0),m(C,null,E(s.form.phone_numbers,(u,l)=>(n(),m("div",{key:l,class:"flex items-center space-x-2"},[d(p,{type:"tel",class:"flex-1",placeholder:"+1234567890",modelValue:s.form.phone_numbers[l].value,"onUpdate:modelValue":_=>s.form.phone_numbers[l].value=_,errorText:e.formState.getFormError(`phone_numbers.${l}.value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),a("label",mt,[M(a("input",{type:"radio",value:l,"onUpdate:modelValue":t[1]||(t[1]=_=>s.primaryPhoneIndex=_),onChange:_=>e.setPrimaryPhone(l),disabled:s.form.phone_numbers[l].value===""},null,40,ct),[[F,s.primaryPhoneIndex]]),t[4]||(t[4]=a("span",{class:"text-sm text-gray-700"},"Primary",-1))]),s.form.phone_numbers.length>1?(n(),z(y,{key:0,size:"xs",leftIcon:s.Trash2,type:"outlineDanger",action:()=>e.removePhoneNumber(l)},null,8,["leftIcon","action"])):b("",!0)]))),128)),d(y,{size:"xs",type:"light",leftIcon:s.Plus,action:e.addPhoneNumber},{default:x(()=>t[5]||(t[5]=[I(" Add another phone number ")])),_:1},8,["leftIcon","action"]),e.formState.getFormError("phone_numbers")?(n(),m("p",ut,g(e.formState.getFormError("phone_numbers")),1)):b("",!0)]),a("div",pt,[t[9]||(t[9]=a("label",{class:"block text-sm font-medium text-gray-700"}," Email Address ",-1)),(n(!0),m(C,null,E(s.form.emails,(u,l)=>(n(),m("div",{key:l,class:"flex items-center space-x-2"},[d(p,{modelValue:s.form.emails[l].value,"onUpdate:modelValue":_=>s.form.emails[l].value=_,type:"email",placeholder:"example@domain.com",class:"flex-1",errorText:e.formState.getFormError(`emails.${l}.value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),a("label",dt,[M(a("input",{type:"radio",value:l,"onUpdate:modelValue":t[2]||(t[2]=_=>s.primaryEmailIndex=_),onChange:_=>e.setPrimaryEmail(l),disabled:s.form.emails[l].value===""},null,40,ht),[[F,s.primaryEmailIndex]]),t[7]||(t[7]=a("span",{class:"text-sm text-gray-700"},"Primary",-1))]),s.form.emails.length>1?(n(),z(y,{key:0,size:"xs",leftIcon:s.Trash2,type:"outlineDanger",action:()=>e.removeEmail(l)},null,8,["leftIcon","action"])):b("",!0)]))),128)),d(y,{size:"xs",type:"light",leftIcon:s.Plus,action:e.addEmail},{default:x(()=>t[8]||(t[8]=[I(" Add another email address ")])),_:1},8,["leftIcon","action"]),e.formState.getFormError("emails")?(n(),m("p",ft,g(e.formState.getFormError("emails")),1)):b("",!0)]),(n(!0),m(C,null,E(s.customAttributes,u=>(n(),m("div",{key:u.id,class:"space-y-2"},[d(p,{showAsterisk:u.name==="name",placeholder:"Enter "+u.name,modelValue:s.form.custom_attributes[u.name],"onUpdate:modelValue":l=>s.form.custom_attributes[u.name]=l,type:u.type==="textarea"?"textarea":"text",label:u.name.charAt(0).toUpperCase()+u.name.slice(1),errorText:e.formState.getFormError(`custom_attributes.${u.name}`)},null,8,["showAsterisk","placeholder","modelValue","onUpdate:modelValue","type","label","errorText"])]))),128)),d(v,{allowCustom:"",isDraggable:"",label:"Tags",modelValue:s.form.tags,"onUpdate:modelValue":t[3]||(t[3]=u=>s.form.tags=u),options:s.tagOptions,placeholder:"Select or create tags",searchableFields:["label","value"],errorText:e.formState.getFormError("tags")},null,8,["modelValue","options","errorText"])])]),_:3},8,["approveLoading","approveAction"])}const _t=k(it,[["render",gt]]),yt={name:"UpdateContactModal",inject:["formState","notificationState"],components:{Modal:T,Input:D,Button:L,Select:N,SelectTags:j},data(){return{Plus:q,Trash2:V,isUpdating:!1,contact:null,form:{organization_id:null,custom_attributes:{},phone_numbers:[{value:"",is_primary:!0}],emails:[{value:"",is_primary:!0}],tags:[]},organizationOptions:[],customAttributes:[],tagOptions:[],primaryPhoneIndex:0,primaryEmailIndex:0}},methods:{async showModal(o){this.reset(),this.contact=o,this.form.organization_id=o.organization_id,this.form.custom_attributes={},await this.fetchCustomAttributes(),o.custom_attributes&&Array.isArray(o.custom_attributes)&&o.custom_attributes.forEach(r=>{this.form.custom_attributes.hasOwnProperty(r.name)&&(this.form.custom_attributes[r.name]=r.value)});const t=o.identifiers||[];this.form.phone_numbers=t.filter(r=>r.type==="phone").map((r,i)=>({value:r.value,is_primary:r.is_primary})),this.form.phone_numbers.length===0&&(this.form.phone_numbers=[{value:"",is_primary:!0}]),this.primaryPhoneIndex=this.form.phone_numbers.findIndex(r=>r.is_primary)||0,this.form.emails=t.filter(r=>r.type==="email").map((r,i)=>({value:r.value,is_primary:r.is_primary})),this.form.emails.length===0&&(this.form.emails=[{value:"",is_primary:!0}]),this.primaryEmailIndex=this.form.emails.findIndex(r=>r.is_primary)||0,this.form.tags=o.tags&&Array.isArray(o.tags)?o.tags.map(r=>typeof r=="string"?r:r.name):[],await this.fetchTags(),this.fetchOrganizations(),this.$refs.modal.showModal()},reset(){this.form.organization_id=null,this.form.custom_attributes={},this.form.phone_numbers=[{value:"",is_primary:!0}],this.form.emails=[{value:"",is_primary:!0}],this.form.tags=[],this.customAttributes=[],this.tagOptions=[],this.primaryPhoneIndex=0,this.primaryEmailIndex=0,this.contact=null,this.formState.hideFormErrors()},async fetchOrganizations(){var o;try{const t=await S.get("/api/organizations");this.organizationOptions=(((o=t.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(t){console.error("Failed to load organizations:",t)}},async fetchCustomAttributes(){var o;if(!this.form.organization_id){this.customAttributes=[],this.form.custom_attributes={};return}try{const t=await S.get("/api/custom-attributes",{params:{organization_id:this.form.organization_id}});this.customAttributes=((o=t.data)==null?void 0:o.data)??[],this.form.custom_attributes=this.customAttributes.reduce((r,i)=>(r[i.name]="",r),{})}catch(t){console.error("Failed to load custom attributes:",t)}},async fetchTags(){var o;if(!this.form.organization_id){this.tagOptions=[];return}try{const t=await S.get("/api/tags",{params:{organization_id:this.form.organization_id}});this.tagOptions=(((o=t.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.name}))}catch(t){console.error("Failed to load tags:",t)}},async onOrganizationChange(){await Promise.all([this.fetchCustomAttributes(),this.fetchTags()])},addPhoneNumber(){this.form.phone_numbers.push({value:"",is_primary:!1})},removePhoneNumber(o){this.form.phone_numbers[o].is_primary&&(this.form.phone_numbers[0].is_primary=!0,this.primaryPhoneIndex=0),this.form.phone_numbers.splice(o,1),this.primaryPhoneIndex>=this.form.phone_numbers.length&&(this.primaryPhoneIndex=this.form.phone_numbers.length-1)},setPrimaryPhone(o){this.form.phone_numbers.forEach((t,r)=>{t.is_primary=r===o}),this.primaryPhoneIndex=o},addEmail(){this.form.emails.push({value:"",is_primary:!1})},removeEmail(o){this.form.emails[o].is_primary&&(this.form.emails[0].is_primary=!0,this.primaryEmailIndex=0),this.form.emails.splice(o,1),this.primaryEmailIndex>=this.form.emails.length&&(this.primaryEmailIndex=this.form.emails.length-1)},setPrimaryEmail(o){this.form.emails.forEach((t,r)=>{t.is_primary=r===o}),this.primaryEmailIndex=o},async updateContact(o){var i,s;this.formState.hideFormErrors(),this.form.organization_id||this.formState.setFormError("organization_id","Organization is required"),(!this.form.custom_attributes.name||this.form.custom_attributes.name.trim()==="")&&this.formState.setFormError("custom_attributes.name","Name is required");const t=this.form.phone_numbers.filter(e=>e.value.trim()!=="");t.length===0?this.formState.setFormError("phone_numbers","At least one phone number is required"):t.forEach((e,c)=>{e.value.match(/^\+[1-9]\d{1,14}$/)||this.formState.setFormError(`phone_numbers.${c}.value`,"Phone number must be in E.164 format (e.g., +1234567890)")});const r=this.form.emails.filter(e=>e.value.trim()!=="");if(r.forEach((e,c)=>{e.value.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)||this.formState.setFormError(`emails.${c}.value`,"Email address must be valid (e.g., example@domain.com)")}),!this.formState.hasErrors){this.isUpdating=!0;try{const e={identifiers:[],tags:this.form.tags,custom_attributes:[],organization_id:this.form.organization_id};t.forEach(p=>{e.identifiers.push({type:"phone",value:p.value,is_primary:p.is_primary})}),r.forEach(p=>{e.identifiers.push({type:"email",value:p.value,is_primary:p.is_primary})});for(const[p,y]of Object.entries(this.form.custom_attributes))if(y&&y.trim()!==""){const v=this.customAttributes.find(A=>A.name===p);v&&e.custom_attributes.push({custom_attribute_id:v.id,name:v.name,type:v.type,value:y})}const c=`/api/contacts/${this.contact.id}`;await S.put(c,e),this.notificationState.showSuccessNotification("Contact updated"),this.$emit("updated"),o()}catch(e){const c=((s=(i=e==null?void 0:e.response)==null?void 0:i.data)==null?void 0:s.message)||(e==null?void 0:e.message)||"Something went wrong updating the contact";this.notificationState.showWarningNotification(c),this.formState.setServerFormErrors(e),console.error("Failed to update contact:",e)}finally{this.isUpdating=!1}}}}},bt={class:"space-y-4"},xt={class:"space-y-2"},wt={class:"flex items-center space-x-1"},vt=["value","onChange","disabled"],Ct={key:0,class:"text-sm text-red-600"},St={class:"space-y-2"},zt={class:"flex items-center space-x-1"},Et=["value","onChange","disabled"],It={key:0,class:"text-sm text-red-600"};function At(o,t,r,i,s,e){const c=h("Select"),p=h("Input"),y=h("Button"),v=h("SelectTags"),A=h("Modal");return n(),z(A,{size:"md",ref:"modal",showFooter:!0,dismissable:!0,scrollOnContent:!1,showApproveButton:!0,approveLoading:s.isUpdating,header:"Update Contact",approveText:"Update Contact",approveAction:e.updateContact,subheader:"Modify the contact's details"},{trigger:x(u=>[R(o.$slots,"default",{showModal:u.showModal})]),content:x(()=>[a("div",bt,[d(c,{showAsterisk:!0,label:"Organization",modelValue:s.form.organization_id,"onUpdate:modelValue":t[0]||(t[0]=u=>s.form.organization_id=u),options:s.organizationOptions,onChange:e.onOrganizationChange,placeholder:"Select organization",errorText:e.formState.getFormError("organization_id"),disabled:!0},null,8,["modelValue","options","onChange","errorText"]),a("div",xt,[t[6]||(t[6]=a("label",{class:"block text-sm font-medium text-gray-700"},[I(" Phone Number "),a("span",{class:"text-red-500"},"*")],-1)),(n(!0),m(C,null,E(s.form.phone_numbers,(u,l)=>(n(),m("div",{key:l,class:"flex items-center space-x-2"},[d(p,{type:"tel",class:"flex-1",placeholder:"+1234567890",modelValue:s.form.phone_numbers[l].value,"onUpdate:modelValue":_=>s.form.phone_numbers[l].value=_,errorText:e.formState.getFormError(`phone_numbers.${l}.value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),a("label",wt,[M(a("input",{type:"radio",value:l,"onUpdate:modelValue":t[1]||(t[1]=_=>s.primaryPhoneIndex=_),onChange:_=>e.setPrimaryPhone(l),disabled:s.form.phone_numbers[l].value===""},null,40,vt),[[F,s.primaryPhoneIndex]]),t[4]||(t[4]=a("span",{class:"text-sm text-gray-700"},"Primary",-1))]),s.form.phone_numbers.length>1?(n(),z(y,{key:0,size:"xs",leftIcon:s.Trash2,type:"outlineDanger",action:()=>e.removePhoneNumber(l)},null,8,["leftIcon","action"])):b("",!0)]))),128)),d(y,{size:"xs",type:"light",leftIcon:s.Plus,action:e.addPhoneNumber},{default:x(()=>t[5]||(t[5]=[I(" Add another phone number ")])),_:1},8,["leftIcon","action"]),e.formState.getFormError("phone_numbers")?(n(),m("p",Ct,g(e.formState.getFormError("phone_numbers")),1)):b("",!0)]),a("div",St,[t[9]||(t[9]=a("label",{class:"block text-sm font-medium text-gray-700"}," Email Address ",-1)),(n(!0),m(C,null,E(s.form.emails,(u,l)=>(n(),m("div",{key:l,class:"flex items-center space-x-2"},[d(p,{modelValue:s.form.emails[l].value,"onUpdate:modelValue":_=>s.form.emails[l].value=_,type:"email",placeholder:"example@domain.com",class:"flex-1",errorText:e.formState.getFormError(`emails.${l}.value`)},null,8,["modelValue","onUpdate:modelValue","errorText"]),a("label",zt,[M(a("input",{type:"radio",value:l,"onUpdate:modelValue":t[2]||(t[2]=_=>s.primaryEmailIndex=_),onChange:_=>e.setPrimaryEmail(l),disabled:s.form.emails[l].value===""},null,40,Et),[[F,s.primaryEmailIndex]]),t[7]||(t[7]=a("span",{class:"text-sm text-gray-700"},"Primary",-1))]),s.form.emails.length>1?(n(),z(y,{key:0,size:"xs",leftIcon:s.Trash2,type:"outlineDanger",action:()=>e.removeEmail(l)},null,8,["leftIcon","action"])):b("",!0)]))),128)),d(y,{size:"xs",type:"light",leftIcon:s.Plus,action:e.addEmail},{default:x(()=>t[8]||(t[8]=[I(" Add another email address ")])),_:1},8,["leftIcon","action"]),e.formState.getFormError("emails")?(n(),m("p",It,g(e.formState.getFormError("emails")),1)):b("",!0)]),(n(!0),m(C,null,E(s.customAttributes,u=>(n(),m("div",{key:u.id,class:"space-y-2"},[d(p,{showAsterisk:u.name==="name",placeholder:"Enter "+u.name,modelValue:s.form.custom_attributes[u.name],"onUpdate:modelValue":l=>s.form.custom_attributes[u.name]=l,type:u.type==="textarea"?"textarea":"text",label:u.name.charAt(0).toUpperCase()+u.name.slice(1),errorText:e.formState.getFormError(`custom_attributes.${u.name}`)},null,8,["showAsterisk","placeholder","modelValue","onUpdate:modelValue","type","label","errorText"])]))),128)),d(v,{allowCustom:"",isDraggable:"",label:"Tags",modelValue:s.form.tags,"onUpdate:modelValue":t[3]||(t[3]=u=>s.form.tags=u),options:s.tagOptions,placeholder:"Select or create tags",searchableFields:["label","value"],errorText:e.formState.getFormError("tags")},null,8,["modelValue","options","errorText"])])]),_:3},8,["approveLoading","approveAction"])}const Tt=k(yt,[["render",At]]),kt={components:{Modal:T},inject:["notificationState"],data(){return{contact:null,isDeleting:!1}},methods:{showModal(o){this.contact=o,this.$refs.modal.showModal()},async onDelete(o){var t,r,i;if(this.contact){this.isDeleting=!0;try{const s=this.contact._links.delete_contact||`/api/contacts/${this.contact.id}`,e=await S.delete(s);(t=e==null?void 0:e.data)!=null&&t.message&&this.notificationState.showSuccessNotification(e.data.message),this.$emit("deleted",this.contact.id),o()}catch(s){const e=((i=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:i.message)||(s==null?void 0:s.message)||"Something went wrong while deleting the contact";this.notificationState.showWarningNotification(e)}finally{this.isDeleting=!1}}}}},Pt={key:0,class:"text-sm text-gray-700 dark:text-neutral-400"},Mt={class:"font-bold text-black"};function Ft(o,t,r,i,s,e){const c=h("Modal");return n(),z(c,{size:"sm",ref:"modal",approveType:"danger",header:"Confirm Delete",isLoading:s.isDeleting,approveAction:e.onDelete,approveText:"Delete Contact"},{content:x(()=>[s.contact?(n(),m("p",Pt,[t[0]||(t[0]=I(" Are you sure you want to permanently delete ")),a("span",Mt,g(s.contact.first_name)+" "+g(s.contact.last_name),1),t[1]||(t[1]=I("? "))])):b("",!0)]),_:1},8,["isLoading","approveAction"])}const Vt=k(kt,[["render",Ft]]),Dt={components:{Modal:T,Input:D,Select:N,SelectTags:j,CircleAlert:H,CircleCheck:rt},inject:["formState","notificationState"],data(){return{isImporting:!1,showImportStatus:!1,importResult:null,form:{organization_id:null,csv_file:[],tags:[]},organizationOptions:[],tagOptions:[],customAttributes:[]}},computed:{modalHeader(){return this.showImportStatus?"Import Status":"Import Contacts from CSV"},subheader(){return this.showImportStatus&&this.importResult.full_import?"Contacts successfully imported":this.showImportStatus&&this.importResult.no_import?"Contacts were not imported":this.showImportStatus&&this.importResult.partial_import?"Some contacts were not imported":"Upload a CSV file to import multiple contacts"},approveText(){return this.showImportStatus&&this.importResult.full_import?"Done":this.showImportStatus&&(this.importResult.no_import||this.importResult.partial_import)?"Try Again":"Import Contacts"},approveAction(){return this.showImportStatus&&this.importResult.full_import?this.closeModal:this.showImportStatus&&(this.importResult.no_import||this.importResult.partial_import)?this.reset:this.importContacts},showDelineButton(){return!this.showImportStatus||this.showImportStatus&&(this.importResult.no_import||this.importResult.partial_import)},importStatusTitle(){return this.importResult?this.importResult.no_import?"Import Failed":this.importResult.partial_import?"Import Partially Successful":"Import Successful":""},instructionText(){if(!this.form.organization_id||!this.customAttributes.length)return"Select an organization to see the required CSV columns. The CSV file must include 'name' and 'phone' (required with non-empty values), and may include 'email' and organization-specific attributes. Multiple phone numbers or emails can be separated by colons (:).";const o=this.customAttributes.filter(r=>r.name!=="name").map(r=>{let i=`'${r.name}'`;return r.type==="url"?i+=" (URL, e.g., https://example.com)":r.type==="textarea"?i+=" (multi-line text)":r.type==="text"&&(i+=" (single-line text)"),i});return`The CSV file must include 'name' (required, single-line text) and 'phone' (required, e.g., +1234567890), and may include 'email'${o.length?`, ${o.join(", ")}`:""}. Multiple phone numbers or emails can be separated by colons (:). Ensure 'website' is a valid URL and 'address' supports multi-line text.`}},methods:{showModal(){this.reset(),this.fetchOrganizations(),this.$refs.modal.showModal()},reset(){this.showImportStatus=!1,this.importResult=null,this.form.organization_id=null,this.form.csv_file=[],this.form.tags=[],this.tagOptions=[],this.customAttributes=[],this.formState.hideFormErrors()},closeModal(){this.$refs.modal.hideModal()},async fetchOrganizations(){var o;try{const t=await S.get("/api/organizations");this.organizationOptions=(((o=t.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.id}))}catch(t){console.error("Failed to load organizations:",t)}},async fetchTags(){var o;if(!this.form.organization_id){this.tagOptions=[];return}try{const t=await S.get("/api/tags",{params:{organization_id:this.form.organization_id}});this.tagOptions=(((o=t.data)==null?void 0:o.data)??[]).map(r=>({label:r.name,value:r.name}))}catch(t){console.error("Failed to load tags:",t)}},async fetchCustomAttributes(){var o;if(!this.form.organization_id){this.customAttributes=[];return}try{const t=await S.get("/api/custom-attributes",{params:{organization_id:this.form.organization_id}});this.customAttributes=((o=t.data)==null?void 0:o.data)??[]}catch(t){console.error("Failed to load custom attributes:",t)}},async onOrganizationChange(){await Promise.all([this.fetchTags(),this.fetchCustomAttributes()])},handleFileChange(o){this.form.csv_file=o.target.files.length?[{filePath:URL.createObjectURL(o.target.files[0]),uploading:!1,uploaded:null,fileRef:o.target.files[0]}]:[]},formatRecord(o){return Object.entries(o).map(([t,r])=>`${t}: ${r||"(empty)"}`).join(", ")},async importContacts(o){var t,r;if(this.formState.hideFormErrors(),this.form.organization_id||this.formState.setFormError("organization_id","Organization is required"),this.form.csv_file.length===0&&this.formState.setFormError("csv_file","CSV file is required"),!this.formState.hasErrors){this.isImporting=!0;try{const i=new FormData;i.append("organization_id",this.form.organization_id),i.append("csv_file",this.form.csv_file[0].fileRef),this.form.tags.length&&this.form.tags.forEach(e=>i.append("tags[]",e));const s=await S.post("/api/contacts/import",i,{headers:{"Content-Type":"multipart/form-data"},params:{organization_id:this.form.organization_id}});this.importResult=s.data,this.showImportStatus=!0,this.importResult.imported>0&&this.$emit("imported")}catch(i){const s=((r=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:r.message)||(i==null?void 0:i.message)||"Something went wrong while importing contacts";this.notificationState.showWarningNotification(s),this.formState.setServerFormErrors(i),console.error("Failed to import contacts:",i)}finally{this.isImporting=!1}}}}},Ut={key:0,class:"space-y-4"},Ot={class:"text-sm text-gray-500"},Rt={key:1,class:"space-y-4"},Nt={class:"text-center"},Lt={class:"text-xl font-medium text-gray-900 mb-2"},jt={class:"text-sm text-gray-500"},qt={key:2,class:"text-sm text-gray-500"},Bt={class:"font-bold"},Wt={class:"font-bold"},Zt={key:0,class:"mt-4"},Gt={class:"mt-2 overflow-x-auto"},Ht={class:"divide-y divide-gray-200"},Jt={class:"bg-white divide-y divide-gray-200"},Kt={class:"px-4 py-2 whitespace-nowrap text-xs text-gray-900"},Yt={class:"px-4 py-2 text-xs text-gray-900"},Qt={class:"whitespace-pre-wrap min-w-60"},Xt={class:"px-4 py-2 text-xs text-red-600"};function $t(o,t,r,i,s,e){const c=h("Input"),p=h("Select"),y=h("SelectTags"),v=h("CircleCheck"),A=h("CircleAlert"),u=h("Modal");return n(),z(u,{size:"sm",ref:"modal",showFooter:!0,dismissable:!0,header:e.modalHeader,subheader:e.subheader,scrollOnContent:!1,showApproveButton:!0,approveText:e.approveText,approveLoading:s.isImporting,approveAction:e.approveAction,showDelineButton:e.showDelineButton},{trigger:x(l=>[R(o.$slots,"default",{showModal:l.showModal})]),content:x(()=>[s.showImportStatus?(n(),m("div",Rt,[a("div",Nt,[s.importResult.full_import||s.importResult.partial_import?(n(),z(v,{key:0,size:"60",class:P([s.importResult.full_import?"text-green-500":"text-gray-300","mx-auto mb-4"])},null,8,["class"])):(n(),z(A,{key:1,size:"60",class:"text-red-500 mx-auto mb-4"})),a("h3",Lt,g(e.importStatusTitle),1),a("p",jt,g(s.importResult.message),1),s.importResult.total?(n(),m("p",qt,[a("span",Bt,g(s.importResult.imported)+"/"+g(s.importResult.total),1),t[4]||(t[4]=I(" imported, ")),a("span",Wt,g(s.importResult.percentage_imported),1),t[5]||(t[5]=I(" completed. "))])):b("",!0)]),s.importResult.errors.length?(n(),m("div",Zt,[a("div",Gt,[a("table",Ht,[t[6]||(t[6]=a("thead",{class:"bg-gray-50"},[a("tr",null,[a("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Row"),a("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Record"),a("th",{class:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Errors")])],-1)),a("tbody",Jt,[(n(!0),m(C,null,E(s.importResult.errors,l=>(n(),m("tr",{key:l.row},[a("td",Kt,g(l.row),1),a("td",Yt,[a("div",Qt,g(e.formatRecord(l.record)),1)]),a("td",Xt,[a("ul",{class:P(["whitespace-nowrap",{"list-disc list-inside":l.errors.length>=2}])},[(n(!0),m(C,null,E(l.errors,(_,U)=>(n(),m("li",{key:U},g(_),1))),128))],2)])]))),128))])])])])):b("",!0)])):(n(),m("div",Ut,[d(c,{type:"file",maxFiles:1,label:"CSV File",showAsterisk:!0,modelValue:s.form.csv_file,"onUpdate:modelValue":t[0]||(t[0]=l=>s.form.csv_file=l),mimeTypes:["text/csv"],imagePreviewGridCols:1,onChange:e.handleFileChange,errorText:e.formState.getFormError("csv_file")},null,8,["modelValue","onChange","errorText"]),d(p,{modelValue:s.form.organization_id,"onUpdate:modelValue":t[1]||(t[1]=l=>s.form.organization_id=l),options:s.organizationOptions,showAsterisk:!0,label:"Organization",placeholder:"Select organization",errorText:e.formState.getFormError("organization_id"),onChange:e.onOrganizationChange},null,8,["modelValue","options","errorText","onChange"]),d(y,{modelValue:s.form.tags,"onUpdate:modelValue":t[2]||(t[2]=l=>s.form.tags=l),options:s.tagOptions,label:"Tags",placeholder:"Select or create tags",errorText:e.formState.getFormError("tags"),allowCustom:"",isDraggable:"",searchableFields:["label","value"]},null,8,["modelValue","options","errorText"]),a("p",Ot,g(e.instructionText),1),t[3]||(t[3]=a("a",{href:"/templates/contact_import_template.csv",download:"",class:"text-sm text-blue-600 hover:underline"}," Download CSV template ",-1))]))]),_:3},8,["header","subheader","approveText","approveLoading","approveAction","showDelineButton"])}const te=k(Dt,[["render",$t]]),ee={inject:["notificationState"],components:{Modal:T,CircleAlert:H},data(){return{isDeleting:!1,contactIds:[]}},computed:{total(){return this.contactIds.length},approveText(){return this.total===1?"Delete Contact":"Delete Contacts"}},methods:{showModal(o=[]){this.contactIds=o,this.$refs.modal.showModal()},async onDelete(o){var t,r,i;if(!(this.isDeleting||this.contactIds.length===0)){this.isDeleting=!0;try{const s="/api/contacts",e={data:{contact_ids:this.contactIds}},c=await S.delete(s,e),p=(t=c==null?void 0:c.data)==null?void 0:t.message;p&&this.notificationState.showSuccessNotification(p),this.$emit("deleted",this.contactIds),o()}catch(s){const e=((i=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:i.message)||(s==null?void 0:s.message)||"Something went wrong while deleting contacts";this.notificationState.showWarningNotification(e)}finally{this.isDeleting=!1}}}}},se={class:"flex space-x-2 items-center p-4 text-xs bg-red-50 text-red-500 border border-red-200 border-dashed rounded-lg mb-8"};function oe(o,t,r,i,s,e){const c=h("CircleAlert"),p=h("Modal");return n(),z(p,{size:"sm",ref:"modal",approveType:"danger",approveIcon:"delete",isLoading:s.isDeleting,approveAction:e.onDelete,approveText:e.approveText,header:"Delete Contacts"},{content:x(()=>[a("div",se,[d(c,{size:"20"}),a("span",null," Are you sure you want to delete "+g(e.total>1?`these ${e.total} contacts`:"this 1 contact")+"? ",1)])]),_:1},8,["isLoading","approveAction","approveText"])}const re=k(ee,[["render",oe]]),ae={inject:["formState","notificationState"],components:{Pill:X,Modal:T,Input:D,Button:L,Popover:$,Dropdown:st,Table:Q,AddContactModal:_t,UpdateContactModal:Tt,ImportContactsModal:te,DeleteContactModal:Vt,DeleteContactsModal:re,ContactIcon:W},data(){return{Plus:q,Trash2:V,Pencil:ot,capitalize:Z,ContactIcon:W,CloudUpload:at,contacts:[],perPage:"15",getCountryName:Y,checkedRows:[],generateUniqueId:O,pagination:null,searchTerm:null,selectAll:!1,filterExpressions:[],sortingExpressions:[],isLoadingContacts:!1,columns:this.prepareColumns(),dropdownOptions:[{icon:V,label:"Delete",action:this.showDeleteContactsModal}]}},watch:{selectAll(o){this.checkedRows=this.contacts.reduce((t,r)=>(t[r.id]=o,t),{})}},computed:{hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!==""},totalCheckedRows(){return Object.values(this.checkedRows).filter(Boolean).length},hasFilterExpressions(){return this.filterExpressions.length>0},hasSortingExpressions(){return this.sortingExpressions.length>0},showTable(){var o;return this.isLoadingContacts||((o=(this.pagination??{}).meta)==null?void 0:o.total)>0||this.hasSearchTerm||this.hasFilterExpressions||this.hasSortingExpressions}},methods:{formattedDatetime:et,formattedRelativeDate:tt,prepareColumns(o=[]){const t=["Name","Email","Phone Number","Organization","Country","Calls","Created Date"],r=["Name","Email","Phone Number","Organization","Country","Calls","Created Date"];let i=t.map(e=>({name:e,id:O(),active:r.includes(e),priority:r.includes(e)}));const s=o.map(e=>({name:e,custom:!0,active:!1,priority:!1,id:O()}));return[...i,...s]},getCustomAttributeValue(o,t){var r,i;return((i=(r=o.custom_attributes)==null?void 0:r.find(s=>s.name.toLowerCase()===t.toLowerCase()))==null?void 0:i.value)||""},showAddContactModal(){this.$refs.addContactModal.showModal()},showImportContactsModal(){this.$refs.importContactsModal.showModal()},showUpdateContactModal(o){this.$refs.updateContactModal.showModal(o)},showDeleteContactModal(o){this.$refs.deleteContactModal.showModal(o)},showDeleteContactsModal(){const o=this.contacts.filter(t=>this.checkedRows[t.id]).map(t=>t.id);this.$refs.deleteContactsModal.showModal(o)},onContactDeleted(o){this.contacts=this.contacts.filter(t=>t.id!==o),this.contacts.length===0&&this.fetchContacts()},onContactsDeleted(o=[]){o.forEach(t=>{this.checkedRows[t]!==void 0&&(this.checkedRows[t]=!1)}),this.selectAll=!1,this.contacts=this.contacts.filter(t=>!o.includes(t.id)),this.contacts.length===0&&this.fetchContacts()},paginate(o){this.fetchContacts(o)},search(o){this.searchTerm=o,this.fetchContacts()},updatedColumns(o){this.columns=o},updatedFilters(o){const t=o.map(r=>r.expression);B(this.filterExpressions,t)||(this.filterExpressions=t,this.fetchContacts())},updatedSorting(o){const t=o.map(r=>r.expression);B(this.sortingExpressions,t)||(this.sortingExpressions=t,this.fetchContacts())},updatedPerPage(o){this.perPage=o,this.fetchContacts()},async fetchContacts(o=null){var t,r;try{this.isLoadingContacts=!0,o=o??"/api/contacts";let i={params:{per_page:this.perPage,_relationships:"organization,favoriteUser,identifiers,customAttributes,tags",_countable_relationships:"calls"}};this.hasSearchTerm&&(i.params.search=this.searchTerm),this.hasFilterExpressions&&(i.params._filters=this.filterExpressions.join("|")),this.hasSortingExpressions&&(i.params._sort=this.sortingExpressions.join("|"));const s=await S.get(o,i);this.pagination=s.data,this.contacts=this.pagination.data;const e=[...new Set(this.contacts.flatMap(c=>c.custom_attributes.map(p=>Z(p.name))))];this.columns=this.prepareColumns(e),this.checkedRows=this.contacts.reduce((c,p)=>(c[p.id]=!1,c),{})}catch(i){const s=((r=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:r.message)||(i==null?void 0:i.message)||"Something went wrong while fetching contacts";this.notificationState.showWarningNotification(s),console.error("Failed to fetch contacts:",i)}finally{this.isLoadingContacts=!1}}},created(){this.isLoadingContacts=!0,this.searchTerm=this.$route.query.searchTerm,this.$route.query.filterExpressions&&(this.filterExpressions=this.$route.query.filterExpressions.split("|")),this.$route.query.sortingExpressions&&(this.sortingExpressions=this.$route.query.sortingExpressions.split("|")),this.fetchContacts()}},ie={class:"select-none min-h-screen bg-gray-50 pt-8 p-4 sm:p-8 space-y-4 sm:space-y-6"},ne={class:"flex justify-between"},le={class:"flex items-end space-x-2"},me={class:"flex justify-end space-x-2"},ce={class:"border-b border-indigo-200"},ue={scope:"col",class:"whitespace-nowrap align-top font-semibold px-4 py-2.5"},pe={class:"whitespace-nowrap align-center px-4 py-4"},de={key:0,class:"whitespace-nowrap align-center pr-4 py-4 truncate"},he={key:0,class:"whitespace-nowrap align-center pr-4 py-4 max-w-60"},fe={class:"font-medium truncate"},ge={key:1,class:"whitespace-nowrap align-center pr-4 py-4 max-w-60"},_e={class:"truncate"},ye={key:2,class:"whitespace-nowrap align-center pr-4 py-4 max-w-60"},be={class:"truncate"},xe={key:3,class:"whitespace-nowrap align-center pr-4 py-4 max-w-60"},we={key:0,class:"flex items-center space-x-2"},ve={class:"whitespace-nowrap truncate"},Ce={key:4,class:"whitespace-nowrap align-center pr-4 py-4"},Se={key:0,class:"flex items-center space-x-2"},ze={class:"flex items-center space-x-2"},Ee=["alt","src"],Ie={key:5,class:"whitespace-nowrap align-center text-center pr-4 py-4 max-w-60"},Ae={class:"truncate"},Te={key:6,class:"whitespace-nowrap align-center pr-4 py-4"},ke={class:"flex space-x-1 items-center"},Pe={class:"h-16 pr-4 py-4 flex align-middle items-center space-x-2"},Me={key:1,class:"select-none w-full flex justify-center py-16"},Fe={class:"max-w-sm w-full bg-white shadow-sm rounded-xl p-6 flex flex-col items-center text-center space-y-4 border border-dashed border-gray-200"};function Ve(o,t,r,i,s,e){const c=h("ContactIcon"),p=h("Button"),y=h("Dropdown"),v=h("Input"),A=h("Popover"),u=h("Table"),l=h("AddContactModal"),_=h("UpdateContactModal"),U=h("DeleteContactModal"),J=h("ImportContactsModal"),K=h("DeleteContactsModal");return n(),m("div",ie,[e.showTable?(n(),m(C,{key:0},[a("div",ne,[a("div",le,[d(c,{size:"48","stroke-width":"1",class:"text-gray-400"}),t[1]||(t[1]=a("div",null,[a("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white"},"Contacts"),a("p",{class:"text-sm text-gray-600 dark:text-neutral-400"}," Manage contacts within your organization ")],-1))]),a("div",me,[d(p,{type:"primary",size:"md",leftIcon:s.CloudUpload,leftIconSize:"20",action:e.showImportContactsModal},{default:x(()=>t[2]||(t[2]=[a("span",null,"Import Contacts",-1)])),_:1},8,["leftIcon","action"]),d(p,{type:"primary",size:"md",leftIcon:s.Plus,leftIconSize:"20",action:e.showAddContactModal},{default:x(()=>t[3]||(t[3]=[a("span",null,"Add Contact",-1)])),_:1},8,["leftIcon","action"])])]),d(u,{onSearch:e.search,columns:s.columns,perPage:s.perPage,resource:"contacts",onPaginate:e.paginate,onRefresh:e.fetchContacts,searchTerm:s.searchTerm,pagination:s.pagination,isLoading:s.isLoadingContacts,onUpdatedColumns:e.updatedColumns,onUpdatedFilters:e.updatedFilters,onUpdatedSorting:e.updatedSorting,onUpdatedPerPage:e.updatedPerPage,filterExpressions:s.filterExpressions,sortingExpressions:s.sortingExpressions},{belowToolbar:x(()=>[a("div",{class:P([{hidden:e.totalCheckedRows===0},"bg-gray-50 border flex items-center mb-2 p-4 rounded-lg shadow space-x-2"])},[t[4]||(t[4]=a("span",{class:"text-sm"},"Actions: ",-1)),d(y,{triggerSize:"sm",options:s.dropdownOptions,triggerText:`Select Action (${e.totalCheckedRows} selected)`},null,8,["options","triggerText"])],2)]),head:x(()=>[a("tr",ce,[a("th",ue,[d(v,{type:"checkbox",modelValue:s.selectAll,"onUpdate:modelValue":t[0]||(t[0]=f=>s.selectAll=f)},null,8,["modelValue"])]),(n(!0),m(C,null,E(s.columns,(f,w)=>(n(),m(C,{key:w},[f.active?(n(),m("th",{key:0,scope:"col",class:P(["whitespace-nowrap align-top font-semibold pr-4 py-2.5",{"text-center":["Users"].includes(f.name)}])},g(f.name),3)):b("",!0)],64))),128)),t[5]||(t[5]=a("th",{scope:"col",class:"whitespace-nowrap align-top font-semibold pr-4 py-2.5"},"Actions",-1))])]),body:x(()=>[(n(!0),m(C,null,E(s.contacts,f=>(n(),m("tr",{key:f.id,class:P([s.checkedRows[f.id]?"bg-blue-50":"bg-white hover:bg-gray-50","group cursor-pointer text-sm border-b border-gray-200"])},[a("td",pe,[d(v,{type:"checkbox",modelValue:s.checkedRows[f.id],"onUpdate:modelValue":w=>s.checkedRows[f.id]=w},null,8,["modelValue","onUpdate:modelValue"])]),(n(!0),m(C,null,E(s.columns,w=>(n(),m(C,{key:w.id},[w.active&&w.custom?(n(),m("td",de,[a("span",null,g(e.getCustomAttributeValue(f,w.name)),1)])):w.active&&!w.custom?(n(),m(C,{key:1},[w.name==="Name"?(n(),m("td",he,[a("div",fe,g(f.name),1)])):b("",!0),w.name==="Email"?(n(),m("td",ge,[a("span",_e,g(f.primary_email),1)])):b("",!0),w.name==="Phone Number"?(n(),m("td",ye,[a("span",be,g(f.primary_phone),1)])):b("",!0),w.name==="Organization"?(n(),m("td",xe,[f.organization?(n(),m("div",we,[t[6]||(t[6]=a("img",{src:"https://placehold.co/21x24",class:"size-8 rounded-lg shrink-0",alt:"Logo"},null,-1)),a("div",ve,g(f.organization.name),1)])):b("",!0)])):b("",!0),w.name==="Country"?(n(),m("td",Ce,[f.organization?(n(),m("div",Se,[a("div",ze,[f.organization.country?(n(),m("img",{key:0,alt:f.organization.country,class:"w-5 h-4 rounded-sm object-cover",src:`/svgs/country-flags/${f.organization.country.toLowerCase()}.svg`},null,8,Ee)):b("",!0),a("span",null,g(s.getCountryName(f.organization.country)),1)])])):b("",!0)])):w.name==="Calls"?(n(),m("td",Ie,[a("span",Ae,g(f.calls_count),1)])):w.name==="Created Date"?(n(),m("td",Te,[a("div",ke,[a("span",null,g(e.formattedDatetime(f.created_at)),1),d(A,{placement:"top",class:"opacity-0 group-hover:opacity-100",content:e.formattedRelativeDate(f.created_at)},null,8,["content"])])])):b("",!0)],64)):b("",!0)],64))),128)),a("td",Pe,[d(p,{type:"bare",size:"xs",leftIcon:s.Pencil,leftIconSize:"16",action:()=>e.showUpdateContactModal(f)},null,8,["leftIcon","action"]),d(p,{type:"bareDanger",size:"xs",leftIcon:s.Trash2,leftIconSize:"16",action:()=>e.showDeleteContactModal(f)},null,8,["leftIcon","action"])])],2))),128))]),_:1},8,["onSearch","columns","perPage","onPaginate","onRefresh","searchTerm","pagination","isLoading","onUpdatedColumns","onUpdatedFilters","onUpdatedSorting","onUpdatedPerPage","filterExpressions","sortingExpressions"])],64)):(n(),m("div",Me,[a("div",Fe,[d(c,{size:"48",class:"text-gray-400"}),t[8]||(t[8]=a("h2",{class:"text-2xl font-bold text-gray-800"},"No Contacts Yet",-1)),t[9]||(t[9]=a("p",{class:"text-sm text-gray-500"},"Add a contact to manage customer interactions.",-1)),d(p,{type:"primary",size:"md",leftIcon:s.Plus,leftIconSize:"20",action:e.showAddContactModal},{default:x(()=>t[7]||(t[7]=[a("span",null,"Add Contact",-1)])),_:1},8,["leftIcon","action"])])])),d(l,{ref:"addContactModal",onCreated:e.fetchContacts},null,8,["onCreated"]),d(_,{ref:"updateContactModal",onUpdated:e.fetchContacts},null,8,["onUpdated"]),d(U,{ref:"deleteContactModal",onDeleted:e.onContactDeleted},null,8,["onDeleted"]),d(J,{ref:"importContactsModal",onImported:e.fetchContacts},null,8,["onImported"]),d(K,{ref:"deleteContactsModal",onDeleted:e.onContactsDeleted},null,8,["onDeleted"])])}const $e=k(ae,[["render",Ve]]);export{$e as default};
