import{L as w}from"./Logo-CEFCQWTC.js";import{I as x}from"./Input-Ce6sOWCE.js";import{B as b}from"./Button-QuQuG-sh.js";import{c,a as e,d as i,r as a,i as y,b as S,t as m,w as u,j as v,o as g,e as k}from"./app-Du355Hwa.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./createLucideIcon-CQR3ABw7.js";import"./Tooltip-Bh561etO.js";import"./mail-CmabDzCr.js";const F={name:"ForgotPassword",components:{Logo:w,Input:x,Button:b},inject:["formState","notificationState"],data(){return{form:{email:""},loading:!1,currentYear:new Date().getFullYear()}},methods:{async submit(){var n,t;if(!this.loading&&(this.formState.hideFormErrors(),this.form.email.trim()===""&&this.formState.setFormError("email","Email is required"),!this.formState.hasErrors)){this.loading=!0;try{await v.post("/api/auth/forgot-password",this.form),this.notificationState.showSuccessNotification("A password reset link has been sent to your email."),this.$router.push({name:"login"})}catch(s){const d=((t=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:t.message)||(s==null?void 0:s.message)||"Something went wrong while requesting a password reset link";this.formState.setServerFormErrors(s),this.notificationState.showWarningNotification(d),console.error("Failed to request password reset link:",s)}finally{this.loading=!1}}}},mounted(){this.form.email=this.$route.query.email||""}},B={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},j={class:"flex items-center justify-center p-6 bg-slate-100"},V={class:"w-full max-w-md"},L={class:"flex justify-center mb-6"},N={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},T={key:0,class:"text-red-500 text-sm mb-3"},q={class:"ml-1"},C={class:"flex justify-center mt-4"},I={class:"text-sm text-center text-gray-500"};function P(n,t,s,d,r,o){const f=a("Logo"),p=a("Input"),h=a("Button"),_=a("router-link");return g(),c("div",B,[e("div",j,[e("div",V,[e("div",L,[i(f,{height:"h-10"})]),e("div",N,[t[3]||(t[3]=e("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Forgot Password",-1)),t[4]||(t[4]=e("h1",{class:"text-sm text-gray-500 mb-4"},"Enter your email address to receive a password reset link.",-1)),e("form",{onSubmit:t[1]||(t[1]=y((...l)=>o.submit&&o.submit(...l),["prevent"])),class:"space-y-4"},[i(p,{type:"email",label:"Email",modelValue:r.form.email,"onUpdate:modelValue":t[0]||(t[0]=l=>r.form.email=l),errorText:o.formState.getFormError("email")},null,8,["modelValue","errorText"]),o.formState.generalErrorText?(g(),c("div",T,m(o.formState.generalErrorText),1)):S("",!0),i(h,{size:"md",type:"primary",class:"w-full",action:o.submit,disabled:r.loading},{default:u(()=>[e("span",q,m(r.loading?"Sending...":"Send Reset Link"),1)]),_:1},8,["action","disabled"]),e("div",C,[i(_,{to:{name:"login"},class:"text-sm text-blue-600 hover:underline"},{default:u(()=>t[2]||(t[2]=[k("Back to Login")])),_:1})])],32)]),e("p",I,"Â© "+m(r.currentYear)+" Telcoflo. All rights reserved.",1)])]),t[5]||(t[5]=e("div",{class:"hidden lg:block"},[e("img",{src:"/images/smiling-customer-service-agent.jpg",class:"w-full h-full object-cover",alt:"Customer service agent"})],-1))])}const G=E(F,[["render",P]]);export{G as default};
