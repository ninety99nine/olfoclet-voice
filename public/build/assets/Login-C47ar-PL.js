import{L as _}from"./Logo-CEFCQWTC.js";import{I as b}from"./Input-Ce6sOWCE.js";import{B as y}from"./Button-QuQuG-sh.js";import{c,a as e,b as u,d as n,t as l,r as m,i as S,w as p,j as v,o as g,e as E}from"./app-Du355Hwa.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{L as V}from"./log-in-hhQW9m11.js";import"./createLucideIcon-CQR3ABw7.js";import"./Tooltip-Bh561etO.js";import"./mail-CmabDzCr.js";const k={name:"Login",components:{Logo:_,Input:b,Button:y},inject:["authState","formState","notificationState"],data(){return{LogIn:V,form:{email:"",password:""},loading:!1,organization:null,currentYear:new Date().getFullYear()}},methods:{async submit(){if(!this.loading&&(this.formState.hideFormErrors(),this.form.email.trim()===""?this.formState.setFormError("email","Enter your email"):this.form.password.trim()===""&&this.formState.setFormError("password","Enter your password"),!this.formState.hasErrors)){this.loading=!0;try{await this.authState.login(this.form),this.$router.push({name:"show-home"})}catch(i){this.formState.setServerFormErrors(i)}finally{this.loading=!1}}}},async mounted(){var t,d;const i=this.$route.params.alias;if(i)try{const{data:r}=await v.get(`/api/organizations/alias/${i}`);this.organization=r}catch(r){const o=((d=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:d.message)||(r==null?void 0:r.message)||"Something went wrong while searching for the organization";this.notificationState.showWarningNotification(o),console.error("Failed to fetch organization:",r)}}},F={class:"min-h-screen grid grid-cols-1 lg:grid-cols-2 transition-opacity opacity-100 duration-750 lg:grow starting:opacity-0"},z={class:"flex items-center justify-center p-6 bg-slate-100"},I={class:"w-full max-w-md"},T={class:"flex justify-center mb-6"},j={key:0,class:"text-4xl font-semibold leading-none tracking-tight mb-4"},B={class:"bg-white rounded-lg shadow-sm border border-slate-200 p-6 mb-6"},N={key:0,class:"text-red-500 text-sm mb-3"},C={class:"flex justify-end mb-6"},Y={class:"ml-1"},D={class:"text-sm text-center text-gray-500"};function U(i,t,d,r,o,s){const h=m("Logo"),f=m("Input"),w=m("router-link"),x=m("Button");return g(),c("div",F,[e("div",z,[e("div",I,[e("div",T,[o.organization?(g(),c("h1",j,l(o.organization.name),1)):u("",!0),n(h,{height:"h-10"})]),e("div",B,[t[4]||(t[4]=e("h1",{class:"text-2xl font-semibold leading-none tracking-tight mb-4"},"Sign in",-1)),t[5]||(t[5]=e("h1",{class:"text-sm text-gray-500 mb-4"},"Enter your credentials to access the dashboard",-1)),e("form",{onSubmit:t[2]||(t[2]=S((...a)=>s.submit&&s.submit(...a),["prevent"])),class:"space-y-4"},[n(f,{type:"email",label:"Email",modelValue:o.form.email,"onUpdate:modelValue":t[0]||(t[0]=a=>o.form.email=a),errorText:s.formState.getFormError("email")},null,8,["modelValue","errorText"]),n(f,{type:"password",label:"Password",modelValue:o.form.password,"onUpdate:modelValue":t[1]||(t[1]=a=>o.form.password=a),errorText:s.formState.getFormError("password")},null,8,["modelValue","errorText"]),s.formState.generalErrorText?(g(),c("div",N,l(s.formState.generalErrorText),1)):u("",!0),e("div",C,[n(w,{to:{name:"forgot-password"},class:"text-sm text-blue-600 hover:underline"},{default:p(()=>t[3]||(t[3]=[E("Forgot password?")])),_:1})]),n(x,{size:"md",type:"primary",class:"w-full",action:s.submit,leftIcon:o.LogIn},{default:p(()=>[e("span",Y,l(o.loading?"Signing in...":"Login"),1)]),_:1},8,["action","leftIcon"])],32)]),e("p",D,"Â© "+l(o.currentYear)+" Telcoflo. All rights reserved.",1)])]),t[6]||(t[6]=e("div",{class:"hidden lg:block"},[e("img",{src:"/images/smiling-customer-service-agent.jpg",class:"w-full h-full object-cover",alt:"Customer service agent"})],-1))])}const O=L(k,[["render",U]]);export{O as default};
